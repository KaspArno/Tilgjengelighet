
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Tilgjengelighet &#8212; Master Oppgave, Tilgjengelighet 1.0.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for Tilgjengelighet</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">/***************************************************************************</span>
<span class="sd"> Tilgjengelighet</span>
<span class="sd">                                 A QGIS plugin</span>
<span class="sd"> My Tilgjengelighet assignment</span>
<span class="sd">                              -------------------</span>
<span class="sd">        begin                : 2017-08-21</span>
<span class="sd">        git sha              : $Format:%H$</span>
<span class="sd">        copyright            : (C) 2017 by Kasper Skjeggestad</span>
<span class="sd">        email                : kasper.skjeggestad@gmail.com</span>
<span class="sd"> ***************************************************************************/</span>

<span class="sd">/***************************************************************************</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> *   This program is free software; you can redistribute it and/or modify  *</span>
<span class="sd"> *   it under the terms of the GNU General Public License as published by  *</span>
<span class="sd"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<span class="sd"> *   (at your option) any later version.                                   *</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> ***************************************************************************/</span>
<span class="sd">&quot;&quot;&quot;</span>



<div class="viewcode-block" id="Tilgjengelighet"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet">[docs]</a><span class="k">class</span> <span class="nc">Tilgjengelighet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;QGIS Plugin Implementation.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iface</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">        :param iface: An interface instance that will be passed to this class</span>
<span class="sd">            which provides the hook by which you can manipulate the QGIS</span>
<span class="sd">            application at run time.</span>
<span class="sd">        :type iface: QgsInterface</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Save reference to the QGIS interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span> <span class="o">=</span> <span class="n">iface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mapCanvas</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">QSettings</span><span class="p">()</span>
        <span class="c1"># initialize plugin directory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
        <span class="c1"># initialize locale</span>
        <span class="n">locale</span> <span class="o">=</span> <span class="n">QSettings</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39;locale/userLocale&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">locale_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span><span class="p">,</span>
            <span class="s1">&#39;i18n&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Tilgjengelighet_</span><span class="si">{}</span><span class="s1">.qm&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">locale</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">locale_path</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">translator</span> <span class="o">=</span> <span class="n">QTranslator</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">translator</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">locale_path</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">qVersion</span><span class="p">()</span> <span class="o">&gt;</span> <span class="s1">&#39;4.3.3&#39;</span><span class="p">:</span>
                <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">installTranslator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">translator</span><span class="p">)</span>


        <span class="c1"># Declare instance attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;&amp;Kartverket Tilgjengelighet&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addToolBar</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;Tilgjengelighet&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;Tilgjengelighet&#39;</span><span class="p">)</span>

        
        <span class="c1">#Globale Variabler</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uspesifisert</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="c1">#For emty comboboxses and lineEdtis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mer</span> <span class="o">=</span> <span class="s2">&quot;&gt;&quot;</span> <span class="c1">#for combobokser linked to more or less iterations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mindre</span> <span class="o">=</span> <span class="s2">&quot;&lt;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mer_eller_lik</span> <span class="o">=</span> <span class="s2">&quot;&gt;=&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mindre_eller_lik</span> <span class="o">=</span> <span class="s2">&quot;&lt;=&quot;</span>

        <span class="c1">#layers and search</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layers</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#gather all baselayers</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1">#The last searched layer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1">#history of all search</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span> <span class="o">=</span> <span class="kc">None</span> 

        <span class="bp">self</span><span class="o">.</span><span class="n">feature_type_tettsted</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;HC-Parkering&quot;</span> <span class="p">:</span><span class="s1">&#39;app:TettstedHCparkering&#39;</span><span class="p">,</span> <span class="s2">&quot;Inngang&quot;</span> <span class="p">:</span><span class="s1">&#39;app:TettstedInngangBygg&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;Parkeringsomr</span><span class="se">\xe5</span><span class="s1">de&#39;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;app:TettstedParkeringsomr</span><span class="se">\xe5</span><span class="s1">de&#39;</span><span class="p">,</span> <span class="s2">&quot;Vei&quot;</span> <span class="p">:</span> <span class="s1">&#39;app:TettstedVei&#39;</span><span class="p">}</span>

        <span class="c1">#Icons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icon_rullestol_tilgjengelig</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;icons/Tilgjengelig.png&#39;</span><span class="p">)</span><span class="c1">#QIcon(&#39;:/plugins/Tilgjengelighet/icons/Tilgjengelig.png&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icon_rullestol_ikkeTilgjengelig</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;icons/IkkeTilgjengelig.png&#39;</span><span class="p">)</span><span class="c1">#QIcon(&#39;:/plugins/Tilgjengelighet/icons/IkkeTilgjengelig.png&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icon_rullestol_vansekligTilgjengelig</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;icons/VanskeligTilgjengelig.png&#39;</span><span class="p">)</span><span class="c1">#QIcon(&#39;:/plugins/Tilgjengelighet/icons/VanskeligTilgjengelig.png&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icon_rullestol_ikkeVurdert</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;icons/IkkeVurdert.png&#39;</span><span class="p">)</span><span class="c1">#QIcon(&#39;:/plugins/Tilgjengelighet/icons/IkkeVurdert.png&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icons_rullestol</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;tilgjengelig&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">icon_rullestol_tilgjengelig</span><span class="p">,</span> <span class="s2">&quot;ikkeTilgjengelig&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">icon_rullestol_ikkeTilgjengelig</span><span class="p">,</span> <span class="s2">&quot;vanskeligTilgjengelig&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">icon_rullestol_vansekligTilgjengelig</span><span class="p">,</span> <span class="s2">&quot;ikkeVurdert&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">icon_rullestol_ikkeTilgjengelig</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">icon_elrullestol_tilgjengelig</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;icons/TilgjengeligEl.png&#39;</span><span class="p">)</span><span class="c1">#QIcon(&#39;:/plugins/Tilgjengelighet/icons/TilgjengeligEl.png&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icon_elrullestol_ikkeTilgjengelig</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;icons/IkkeTilgjengeligEl.png&#39;</span><span class="p">)</span><span class="c1">#QIcon(&#39;:/plugins/Tilgjengelighet/icons/IkkeTilgjengeligEl.png&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icon_elrullestol_vansekligTilgjengelig</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;icons/VanskeligTilgjengeligEl.png&#39;</span><span class="p">)</span><span class="c1">#QIcon(&#39;:/plugins/Tilgjengelighet/icons/VanskeligTilgjengeligEl.png&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icon_elrullestol_ikkeVurdert</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;icons/IkkeVurdertEl.png&#39;</span><span class="p">)</span><span class="c1">#QIcon(&#39;:/plugins/Tilgjengelighet/icons/IkkeVurdertEl.png&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icons_elrullestol</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;tilgjengelig&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">icon_elrullestol_tilgjengelig</span><span class="p">,</span> <span class="s2">&quot;ikkeTilgjengelig&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">icon_elrullestol_ikkeTilgjengelig</span><span class="p">,</span> <span class="s2">&quot;vanskeligTilgjengelig&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">icon_elrullestol_vansekligTilgjengelig</span><span class="p">,</span> <span class="s2">&quot;ikkeVurdert&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">icon_elrullestol_ikkeTilgjengelig</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">icon_syn_tilgjengelig</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;icons/TilgjengeligSyn.png&#39;</span><span class="p">)</span><span class="c1">#QIcon(&#39;:/plugins/Tilgjengelighet/icons/TilgjengeligSyn.png&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icon_syn_ikkeTilgjengelig</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;icons/IkkeTilgjengeligSyn.png&#39;</span><span class="p">)</span><span class="c1">#QIcon(&#39;:/plugins/Tilgjengelighet/icons/IkkeTilgjengeligSyn.png&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icon_syn_vansekligTilgjengelig</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;icons/VanskeligTilgjengeligSyn.png&#39;</span><span class="p">)</span><span class="c1">#QIcon(&#39;:/plugins/Tilgjengelighet/icons/VanskeligTilgjengeligSyn.png&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icon_syn_ikkeVurdert</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;icons/IkkeVurdertSyn.png&#39;</span><span class="p">)</span><span class="c1">#QIcon(&#39;:/plugins/Tilgjengelighet/icons/IkkeVurdertSyn.png&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icons_syn</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;tilgjengelig&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">icon_syn_tilgjengelig</span><span class="p">,</span> <span class="s2">&quot;ikkeTilgjengelig&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">icon_syn_ikkeTilgjengelig</span><span class="p">,</span> <span class="s2">&quot;vanskeligTilgjengelig&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">icon_syn_vansekligTilgjengelig</span><span class="p">,</span> <span class="s2">&quot;ikkeVurdert&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">icon_syn_ikkeTilgjengelig</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">icons</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">icons_rullestol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">icons_elrullestol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">icons_syn</span><span class="p">]</span>

        <span class="c1">#to hide layers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ltv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">layerTreeView</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ltv</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">layerTreeRoot</span><span class="p">()</span>

        <span class="c1">##############################TEST#######################</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span> <span class="o">=</span> <span class="n">WebLayerTypeRegistry</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ol_layers</span> <span class="o">=</span> <span class="p">[]</span>


    <span class="c1"># noinspection PyMethodMayBeStatic</span>
<div class="viewcode-block" id="Tilgjengelighet.tr"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.tr">[docs]</a>    <span class="k">def</span> <span class="nf">tr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the translation for a string using Qt translation API.</span>

<span class="sd">        We implement this ourselves since we do not inherit QObject.</span>

<span class="sd">        :param message: String for translation.</span>
<span class="sd">        :type message: str, QString</span>

<span class="sd">        :returns: Translated version of message.</span>
<span class="sd">        :rtype: QString</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># noinspection PyTypeChecker,PyArgumentList,PyCallByClass</span>
        <span class="k">return</span> <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s1">&#39;Tilgjengelighet&#39;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tilgjengelighet.add_action"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.add_action">[docs]</a>    <span class="k">def</span> <span class="nf">add_action</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">icon_path</span><span class="p">,</span>
        <span class="n">text</span><span class="p">,</span>
        <span class="n">callback</span><span class="p">,</span>
        <span class="n">enabled_flag</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">add_to_menu</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">add_to_toolbar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">status_tip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">whats_this</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a toolbar icon to the toolbar.</span>

<span class="sd">        :param icon_path: Path to the icon for this action. Can be a resource</span>
<span class="sd">            path (e.g. &#39;:/plugins/foo/bar.png&#39;) or a normal file system path.</span>
<span class="sd">        :type icon_path: str</span>

<span class="sd">        :param text: Text that should be shown in menu items for this action.</span>
<span class="sd">        :type text: str</span>

<span class="sd">        :param callback: Function to be called when the action is triggered.</span>
<span class="sd">        :type callback: function</span>

<span class="sd">        :param enabled_flag: A flag indicating if the action should be enabled</span>
<span class="sd">            by default. Defaults to True.</span>
<span class="sd">        :type enabled_flag: bool</span>

<span class="sd">        :param add_to_menu: Flag indicating whether the action should also</span>
<span class="sd">            be added to the menu. Defaults to True.</span>
<span class="sd">        :type add_to_menu: bool</span>

<span class="sd">        :param add_to_toolbar: Flag indicating whether the action should also</span>
<span class="sd">            be added to the toolbar. Defaults to True.</span>
<span class="sd">        :type add_to_toolbar: bool</span>

<span class="sd">        :param status_tip: Optional text to show in a popup when mouse pointer</span>
<span class="sd">            hovers over the action.</span>
<span class="sd">        :type status_tip: str</span>

<span class="sd">        :param parent: Parent widget for the new action. Defaults None.</span>
<span class="sd">        :type parent: QWidget</span>

<span class="sd">        :param whats_this: Optional text to show in the status bar when the</span>
<span class="sd">            mouse pointer hovers over the action.</span>

<span class="sd">        :returns: The action that was created. Note that the action is also</span>
<span class="sd">            added to self.actions list.</span>
<span class="sd">        :rtype: QAction</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Create the dialog (after translation) and keep reference</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span> <span class="o">=</span> <span class="n">TilgjengelighetDialog</span><span class="p">()</span> <span class="c1">#main dialig</span>

        <span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">icon_path</span><span class="p">)</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">enabled_flag</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">status_tip</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">action</span><span class="o">.</span><span class="n">setStatusTip</span><span class="p">(</span><span class="n">status_tip</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">whats_this</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">action</span><span class="o">.</span><span class="n">setWhatsThis</span><span class="p">(</span><span class="n">whats_this</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_to_toolbar</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_to_menu</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addPluginToMenu</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">menu</span><span class="p">,</span>
                <span class="n">action</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addPluginToWebMenu</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">menu</span><span class="p">,</span>
                <span class="n">action</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">action</span></div>

<div class="viewcode-block" id="Tilgjengelighet.initGui"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.initGui">[docs]</a>    <span class="k">def</span> <span class="nf">initGui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create the menu entries and toolbar icons inside the QGIS GUI.&quot;&quot;&quot;</span>

        <span class="n">icon_path</span> <span class="o">=</span> <span class="s1">&#39;:/plugins/Tilgjengelighet/icon.png&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span>
            <span class="n">icon_path</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;Kartverkets Tilgjengelighets database&#39;</span><span class="p">),</span>
            <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">,</span>
            <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>


        <span class="c1">#main window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">setTabIcon</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/plugins/Tilgjengelighet/icons/friluft.png&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">setTabIcon</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/plugins/Tilgjengelighet/icons/tettsted.png&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">currentChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_search_name</span><span class="p">)</span> <span class="c1">#change search name based on tab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">currentChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_search_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">currentChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_search_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">pushButton_HentData</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hentData</span><span class="p">)</span> <span class="c1">#collecting datata for inngangbygg</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">pushButton_reset</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">)</span> <span class="c1">#resett all choses</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_Progress</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1">#table window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span> <span class="o">=</span> <span class="n">TableDialog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setSelectionBehavior</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">SelectRows</span><span class="p">)</span> <span class="c1">#select entire row in table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setEditTriggers</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">NoEditTriggers</span><span class="p">)</span> <span class="c1">#Making table unediteble</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">itemClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_item_clicked</span><span class="p">)</span> <span class="c1">#what happens when an item is clicked in table</span>

        <span class="c1">#info window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span> <span class="o">=</span> <span class="n">infoWidgetDialog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">pushButton_filtrer</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">show</span><span class="p">())</span> <span class="c1">#open main window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">pushButton_filtrer</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_previus_search_activeLayer</span><span class="p">)</span> <span class="c1">#setting main window to match search for active layer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">pushButton_next</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">infoWidget_next</span><span class="p">)</span> <span class="c1">#itterate the selected objekts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">pushButton_prev</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">infoWidget_prev</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">selectPolygon</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/plugins/Tilgjengelighet/icons/Tilgjengelig.png&quot;</span><span class="p">),</span>
                                       <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s2">&quot;MyPlugin&quot;</span><span class="p">,</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">),</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectPoint</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/plugins/Tilgjengelighet/icon&quot;</span><span class="p">),</span>
                                       <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s2">&quot;MyPlugin&quot;</span><span class="p">,</span> <span class="s2">&quot;Punkt/Frihånd&quot;</span><span class="p">),</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">selectPolygon</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">actionSelectPolygon</span><span class="p">()</span><span class="o">.</span><span class="n">trigger</span><span class="p">())</span> <span class="c1">#select objects by polygon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectPoint</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">actionSelectFreehand</span><span class="p">()</span><span class="o">.</span><span class="n">trigger</span><span class="p">())</span> <span class="c1">#select objects by freehand</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">toolButton_velgikart</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selectPolygon</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">toolButton_velgikart</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selectPoint</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">exportExcel</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/plugins/Tilgjengelighet/icons/Tilgjengelig.png&quot;</span><span class="p">),</span>
                                       <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s2">&quot;MyPlugin&quot;</span><span class="p">,</span> <span class="s2">&quot;Excel&quot;</span><span class="p">),</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">exportImage</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/plugins/Tilgjengelighet/icon&quot;</span><span class="p">),</span>
                                       <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s2">&quot;MyPlugin&quot;</span><span class="p">,</span> <span class="s2">&quot;Bilde&quot;</span><span class="p">),</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">exportExcel</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">excelSave</span><span class="p">)</span> <span class="c1">#export tp excel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exportImage</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imageSave</span><span class="p">)</span> <span class="c1">#ecport image</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">toolButton_eksporter</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exportExcel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">toolButton_eksporter</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exportImage</span><span class="p">)</span>


        <span class="c1">#Export window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span> <span class="o">=</span> <span class="n">exportLayerDialog</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">pushButton_bla</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">OpenBrowser</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">pushButton_lagre</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lagre_lag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">pushButton_lagre</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">close</span><span class="p">())</span> <span class="c1">#close winwo when you have saved layer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">pushButton_avbryt</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">close</span><span class="p">())</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_fylker</span><span class="p">()</span> <span class="c1">#fill fylker combobox</span>

        <span class="c1">#set combobox functions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylke_valgt</span><span class="p">)</span> <span class="c1">#Filling cityes from county</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_search_name</span><span class="p">)</span> <span class="c1">#setting search name based on fylke</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_komuner</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_search_name</span><span class="p">)</span> <span class="c1">#setting search name based on komune</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fylker</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;fylker&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fylker</span><span class="o">.</span><span class="n">setComboBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kommuner</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;komune&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kommuner</span><span class="o">.</span><span class="n">setComboBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_komuner</span><span class="p">)</span>


        <span class="c1">#Create attributes object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_combobox_inngang</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_combobox_vei</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_combobox_hc_parkering</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_combobox_parkeringsomraade</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">pushButton_filtrer</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filtrer</span><span class="p">)</span> <span class="c1">#Filtering out the serach and show results</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">openLayer_background_init</span><span class="p">()</span></div>

        <span class="c1">############################################################################################################</span>

<div class="viewcode-block" id="Tilgjengelighet.openLayer_background_init"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.openLayer_background_init">[docs]</a>    <span class="k">def</span> <span class="nf">openLayer_background_init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The folowing code has been taken out from OpenLayers Plugin writen by Sourcepole&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olMenu</span> <span class="o">=</span> <span class="n">QMenu</span><span class="p">(</span><span class="s2">&quot;OpenLayers plugin&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOpenStreetMapLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOpenCycleMapLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOCMLandscapeLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOCMPublicTransportLayer</span><span class="p">())</span>

        <span class="c1"># ID 8-10 was Yahoo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOSMHumanitarianDataModelLayer</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlBingRoadLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlBingAerialLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlBingAerialLabelledLayer</span><span class="p">())</span>

        <span class="c1"># Order from here on is free. Layers 0-14 should keep order for</span>
        <span class="c1"># compatibility with OL Plugin &lt; 2.3</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOSMStamenTonerLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOSMStamenTonerLiteLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOSMStamenWatercolorLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOSMStamenTerrainLayer</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlAppleiPhotoMapLayer</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">WikimediaLabelledLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">WikimediaUnLabelledLayer</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">groups</span><span class="p">():</span>
            <span class="c1">#print(&quot;group: &quot;, group)</span>
            <span class="n">groupMenu</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">menu</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">groupLayerTypes</span><span class="p">(</span><span class="n">group</span><span class="p">):</span>
                <span class="c1">#print(&quot;layer: &quot;, layer)</span>
                <span class="n">layer</span><span class="o">.</span><span class="n">addMenuEntry</span><span class="p">(</span><span class="n">groupMenu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_olMenu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="n">groupMenu</span><span class="p">)</span>

        <span class="c1">#self.addOLmenu()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">toolButton_map</span><span class="o">.</span><span class="n">setMenu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_olMenu</span><span class="p">)</span></div>


    <span class="c1">#####################################################################</span>
    <span class="c1">#TEST</span>
<div class="viewcode-block" id="Tilgjengelighet.addLayer"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.addLayer">[docs]</a>    <span class="k">def</span> <span class="nf">addLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layerType</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The folowing code has been taken out from OpenLayers Plugin writen by Sourcepole&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">layerType</span><span class="o">.</span><span class="n">hasGdalTMS</span><span class="p">():</span>
            <span class="c1"># create GDAL TMS layer</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createGdalTmsLayer</span><span class="p">(</span><span class="n">layerType</span><span class="p">,</span> <span class="n">layerType</span><span class="o">.</span><span class="n">displayName</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># create OpenlayersLayer</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">OpenlayersLayer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="p">)</span>
            <span class="n">layer</span><span class="o">.</span><span class="n">setLayerName</span><span class="p">(</span><span class="n">layerType</span><span class="o">.</span><span class="n">displayName</span><span class="p">)</span>
            <span class="n">layer</span><span class="o">.</span><span class="n">setLayerType</span><span class="p">(</span><span class="n">layerType</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">isValid</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ol_layers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">removeMapLayers</span><span class="p">(</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ol_layers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">()]</span> <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_ol_layers</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ol_layers</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">coordRefSys</span> <span class="o">=</span> <span class="n">layerType</span><span class="o">.</span><span class="n">coordRefSys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvasCrs</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setMapCrs</span><span class="p">(</span><span class="n">coordRefSys</span><span class="p">)</span>
            <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ol_layers</span> <span class="o">+=</span> <span class="p">[</span><span class="n">layer</span><span class="p">]</span>

            <span class="c1"># last added layer is new reference</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setReferenceLayer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">layerType</span><span class="o">.</span><span class="n">hasGdalTMS</span><span class="p">():</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Printing and rotating of Javascript API &quot;</span> \
                      <span class="s2">&quot;based layers is currently not supported!&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">messageBar</span><span class="p">()</span><span class="o">.</span><span class="n">pushMessage</span><span class="p">(</span>
                    <span class="s2">&quot;OpenLayers Plugin&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">QgsMessageBar</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
                    <span class="n">duration</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

            <span class="c1">#Set background mat at bacground</span>
            <span class="n">root</span> <span class="o">=</span> <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">layerTreeRoot</span><span class="p">()</span>
            <span class="n">root</span><span class="o">.</span><span class="n">insertLayer</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">layer</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tilgjengelighet.setReferenceLayer"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.setReferenceLayer">[docs]</a>    <span class="k">def</span> <span class="nf">setReferenceLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The folowing code has been taken out from OpenLayers Plugin writen by Sourcepole&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer</span> <span class="o">=</span> <span class="n">layer</span></div>

<div class="viewcode-block" id="Tilgjengelighet.createGdalTmsLayer"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.createGdalTmsLayer">[docs]</a>    <span class="k">def</span> <span class="nf">createGdalTmsLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layerType</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The folowing code has been taken out from OpenLayers Plugin writen by Sourcepole&quot;&quot;&quot;</span>

        <span class="c1"># create GDAL TMS layer with XML string as datasource</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">QgsRasterLayer</span><span class="p">(</span><span class="n">layerType</span><span class="o">.</span><span class="n">gdalTMSConfig</span><span class="p">(),</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">layer</span><span class="o">.</span><span class="n">setCustomProperty</span><span class="p">(</span><span class="s1">&#39;ol_layer_type&#39;</span><span class="p">,</span> <span class="n">layerType</span><span class="o">.</span><span class="n">layerTypeName</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">layer</span></div>

<div class="viewcode-block" id="Tilgjengelighet.canvasCrs"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.canvasCrs">[docs]</a>    <span class="k">def</span> <span class="nf">canvasCrs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The folowing code has been taken out from OpenLayers Plugin writen by Sourcepole&quot;&quot;&quot;</span>
        <span class="n">mapCanvas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mapCanvas</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">QGis</span><span class="o">.</span><span class="n">QGIS_VERSION_INT</span> <span class="o">&gt;=</span> <span class="mi">20300</span><span class="p">:</span>
            <span class="c1">#crs = mapCanvas.mapRenderer().destinationCrs()</span>
            <span class="n">crs</span> <span class="o">=</span> <span class="n">mapCanvas</span><span class="o">.</span><span class="n">mapSettings</span><span class="p">()</span><span class="o">.</span><span class="n">destinationCrs</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">QGis</span><span class="o">.</span><span class="n">QGIS_VERSION_INT</span> <span class="o">&gt;=</span> <span class="mi">10900</span><span class="p">:</span>
            <span class="n">crs</span> <span class="o">=</span> <span class="n">mapCanvas</span><span class="o">.</span><span class="n">mapRenderer</span><span class="p">()</span><span class="o">.</span><span class="n">destinationCrs</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">crs</span> <span class="o">=</span> <span class="n">mapCanvas</span><span class="o">.</span><span class="n">mapRenderer</span><span class="p">()</span><span class="o">.</span><span class="n">destinationSrs</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">crs</span></div>

<div class="viewcode-block" id="Tilgjengelighet.setMapCrs"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.setMapCrs">[docs]</a>    <span class="k">def</span> <span class="nf">setMapCrs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordRefSys</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The folowing code has been taken out from OpenLayers Plugin writen by Sourcepole&quot;&quot;&quot;</span>
        <span class="n">mapCanvas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mapCanvas</span><span class="p">()</span>
        <span class="c1"># On the fly</span>
        <span class="k">if</span> <span class="n">QGis</span><span class="o">.</span><span class="n">QGIS_VERSION_INT</span> <span class="o">&gt;=</span> <span class="mi">20300</span><span class="p">:</span>
            <span class="c1">#mapCanvas.setCrsTransformEnabled(True)</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#mapCanvas.mapRenderer().setProjectionsEnabled(True)</span>
            <span class="k">pass</span>
        <span class="n">canvasCrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvasCrs</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">canvasCrs</span> <span class="o">!=</span> <span class="n">coordRefSys</span><span class="p">:</span>
            <span class="n">coordTrans</span> <span class="o">=</span> <span class="n">QgsCoordinateTransform</span><span class="p">(</span><span class="n">canvasCrs</span><span class="p">,</span> <span class="n">coordRefSys</span><span class="p">)</span>
            <span class="n">extMap</span> <span class="o">=</span> <span class="n">mapCanvas</span><span class="o">.</span><span class="n">extent</span><span class="p">()</span>
            <span class="n">extMap</span> <span class="o">=</span> <span class="n">coordTrans</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">extMap</span><span class="p">,</span> <span class="n">QgsCoordinateTransform</span><span class="o">.</span><span class="n">ForwardTransform</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">QGis</span><span class="o">.</span><span class="n">QGIS_VERSION_INT</span> <span class="o">&gt;=</span> <span class="mi">20300</span><span class="p">:</span>
                <span class="c1">#mapCanvas.setDestinationCrs(coordRefSys)</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">QGis</span><span class="o">.</span><span class="n">QGIS_VERSION_INT</span> <span class="o">&gt;=</span> <span class="mi">10900</span><span class="p">:</span>
                <span class="c1">#mapCanvas.mapRenderer().setDestinationCrs(coordRefSys)</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#mapCanvas.mapRenderer().setDestinationSrs(coordRefSys)</span>
                <span class="k">pass</span></div>
            <span class="c1">#mapCanvas.freeze(False)</span>
            <span class="c1">#mapCanvas.setMapUnits(coordRefSys.mapUnits())</span>
            <span class="c1">#mapCanvas.setExtent(extMap)</span>




    <span class="c1">###########################################################################</span>



    <span class="c1">#def addOLmenu(self):</span>
    <span class="c1">#    openLayers = OpenlayersPlugin(self.iface, self.infoWidget)</span>
    <span class="c1">#    openLayers.initGui()</span>
        
        <span class="c1">#self.infoWidget.toolButton_map.connect(self.showOLmenu)</span>
    <span class="c1">#    self.infoWidget.toolButton_map.triggered(self.infoWidget.toolButton_map.showMenu())</span>

    <span class="c1">#def showOLmenu(self):</span>
    <span class="c1">#    self.infoWidget.toolButton_map.showMenu()</span>
        

<div class="viewcode-block" id="Tilgjengelighet.assign_combobox_inngang"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.assign_combobox_inngang">[docs]</a>    <span class="k">def</span> <span class="nf">assign_combobox_inngang</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assigning a AttributeForm object to each option in inngang&quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">avstandHC</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;avstandHC&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_avstand_hc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_avstand_hc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ank_stigning</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;stigningAdkomstvei&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_ank_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_ank_stigning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">byggningstype</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;funksjon&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_byggningstype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rampe</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;rampe&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rampe</span><span class="p">,</span> <span class="n">comboBoxText</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Ja&quot;</span> <span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Nei&quot;</span> <span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dortype</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;dørtype&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dortype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dorapner</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;døråpner&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dorapner</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">man_hoyde</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;manøverknappHøyde&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_man_hoyde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_man_hoyde</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dorbredde</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;InngangBredde&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dorbredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_dorbredde</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terskel</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;terskelH</span><span class="se">\xf8</span><span class="s1">yde&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_terskel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_terskel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kontrast</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;kontrast&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kontrast</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rampe_stigning</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;rampeStigning&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_rmp_stigning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rampe_bredde</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;rampeBredde&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_bredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_rmp_bredde</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handlist</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;h</span><span class="se">\xe5</span><span class="s1">ndlist&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_handliste</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handlist1</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;h</span><span class="se">\xe5</span><span class="s1">ndlistH</span><span class="se">\xf8</span><span class="s1">yde1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_hand1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_hand1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handlist2</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;h</span><span class="se">\xe5</span><span class="s1">ndlistH</span><span class="se">\xf8</span><span class="s1">yde2&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_hand2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_hand2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rmp_tilgjengelig</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;rampeTilgjengelig&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_tilgjengelig</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">manuellRullestol</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingRullestol&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_manuell_rullestol</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elektriskRullestol</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingElRull&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_el_rullestol</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">synshemmet</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingSyn&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_syn</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_inngang</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">avstandHC</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ank_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">byggningstype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rampe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dortype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dorapner</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">man_hoyde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dorbredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">terskel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kontrast</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rampe_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rampe_bredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rmp_tilgjengelig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">manuellRullestol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">elektriskRullestol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">synshemmet</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_inngang_gui</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">byggningstype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dortype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dorapner</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kontrast</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rmp_tilgjengelig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">manuellRullestol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">elektriskRullestol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">synshemmet</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_inngang_mer_mindre</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">avstandHC</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ank_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">man_hoyde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dorbredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">terskel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rampe_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rampe_bredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist2</span><span class="p">]</span>

        <span class="c1">#hide gui options</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rampe_boxs</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_rmp_stigning</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_stigning</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rmp_stigning</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_rmp_bredde</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_bredde</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rmp_bredde</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_handliste</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_handliste</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_hand1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_hand1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_hand1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_hand2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_hand2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_hand2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_tilgjengelig</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rmp_tilgjengelig</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">line_4</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rampe</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hide_show_rampe</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tilgjengelighet.assign_combobox_vei"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.assign_combobox_vei">[docs]</a>    <span class="k">def</span> <span class="nf">assign_combobox_vei</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assigning a AttributeForm object to each option in vei&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gatetype</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;gatetype&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_gatetype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nedsenkning1</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;nedsenk1&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_nedsenkning1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_nedsenkning1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nedsenkning2</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;nedsenk2&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_nedsenkning2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_nedsenkning2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dekke_vei_tettsted</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;dekke&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dekke_vei_tettsted</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dekkeTilstand_vei_tettsted</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;dekkeTilstand&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dekkeTilstand_vei_tettsted</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bredde</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;bredde&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_bredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_bredde</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stigning</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;stigning&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_stigning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tverfall</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tverrfall&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_tverfall</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_tverfall</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ledelinje</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;ledelinje&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_ledelinje</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ledelinjeKontrast</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;ledelinjeKontrast&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_ledelinjeKontrast</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manuell_rullestol_vei</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingRullestol&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_manuell_rullestol_vei</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electrisk_rullestol_vei</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingElRull&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_electrisk_rullestol_vei</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">syn_vei</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingSyn&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_syn_vei</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_vei</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">gatetype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nedsenkning1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nedsenkning2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dekke_vei_tettsted</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dekkeTilstand_vei_tettsted</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tverfall</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ledelinje</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ledelinjeKontrast</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">manuell_rullestol_vei</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">electrisk_rullestol_vei</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syn_vei</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_vei_gui</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">gatetype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dekke_vei_tettsted</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dekkeTilstand_vei_tettsted</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ledelinje</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ledelinjeKontrast</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">manuell_rullestol_vei</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">electrisk_rullestol_vei</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">syn_vei</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_vei_mer_mindre</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">nedsenkning1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">nedsenkning2</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">bredde</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">stigning</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">tverfall</span><span class="p">]</span>

        <span class="c1">#Hide GUI</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_nedsenkning1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_nedsenkning1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_nedsenkning1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_nedsenkning2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_nedsenkning2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_nedsenkning2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_gatetype</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hide_show_nedsenkning</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tilgjengelighet.assign_combobox_hc_parkering"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.assign_combobox_hc_parkering">[docs]</a>    <span class="k">def</span> <span class="nf">assign_combobox_hc_parkering</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assigning a AttributeForm object to each option in hc parkering&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">avstandServicebygg</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;avstandServicebygg&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_avstandServicebygg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_avstandServicebygg</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">overbygg</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;overbygg&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_overbygg</span><span class="p">,</span> <span class="n">comboBoxText</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Ja&quot;</span> <span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Nei&quot;</span> <span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skiltet</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;skiltet&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_skiltet</span><span class="p">,</span> <span class="n">comboBoxText</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Ja&quot;</span> <span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Nei&quot;</span> <span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">merket</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;merket&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_merket</span><span class="p">,</span> <span class="n">comboBoxText</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Ja&quot;</span> <span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Nei&quot;</span> <span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bredde_vei</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;bredde&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_bredde_vei</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_bredde_vei</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lengde_vei</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;lengde&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_lengde_vei</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_lengde_vei</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manuell_rullestol_hcparkering</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingRullestol&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_manuell_rullestol_hcparkering</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elektrisk_rullestol_hcparkering</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingElRull&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_elektrisk_rullestol_hcparkering</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_hcparkering</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">avstandServicebygg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overbygg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">skiltet</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">merket</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bredde_vei</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lengde_vei</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">manuell_rullestol_hcparkering</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">elektrisk_rullestol_hcparkering</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_hcparkering_gui</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">manuell_rullestol_hcparkering</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">elektrisk_rullestol_hcparkering</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_hcparkering_mer_mindre</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">avstandServicebygg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bredde_vei</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lengde_vei</span><span class="p">]</span>

        <span class="c1">#Hide GUI</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_bredde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_bredde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_bredde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_lengde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_lengde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_lengde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_merket</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hide_show_merket</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tilgjengelighet.assign_combobox_parkeringsomraade"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.assign_combobox_parkeringsomraade">[docs]</a>    <span class="k">def</span> <span class="nf">assign_combobox_parkeringsomraade</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assigning a AttributeForm object to each option in parkeringsområde&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">overbygg_pomrade</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;overbygg&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_overbygg_pomrade</span><span class="p">,</span> <span class="n">comboBoxText</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Ja&quot;</span> <span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Nei&quot;</span> <span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kapasitetPersonbiler</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;kapasitetPersonbiler&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kapasitetPersonbiler</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_kapasitetPersonbiler</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kapasitetUU</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;kapasitetUU&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kapasitetUU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_kapasitetUU</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dekke_pomrade</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;dekke&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dekke_pomrade</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dekkeTilstand_pomrade</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;dekkeTilstand&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dekkeTilstand_pomrade</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manuell_rullestol_pomrade</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingRullestol&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_manuell_rullestol_pomrade</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_pomrade</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">overbygg_pomrade</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kapasitetPersonbiler</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kapasitetUU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dekke_pomrade</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dekkeTilstand_pomrade</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">manuell_rullestol_pomrade</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_pomrade_gui</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dekke_pomrade</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dekkeTilstand_pomrade</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">manuell_rullestol_pomrade</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_pomrade_mer_mindre</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kapasitetPersonbiler</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kapasitetUU</span><span class="p">]</span></div>


<div class="viewcode-block" id="Tilgjengelighet.unload"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.unload">[docs]</a>    <span class="k">def</span> <span class="nf">unload</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes the plugin menu item and icon from QGIS GUI.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">removePluginWebMenu</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;&amp;Kartverket Tilgjengelighet&#39;</span><span class="p">),</span>
                <span class="n">action</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">removeToolBarIcon</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
        <span class="c1"># remove the toolbar</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span></div>


<div class="viewcode-block" id="Tilgjengelighet.get_temppath"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.get_temppath">[docs]</a>    <span class="k">def</span> <span class="nf">get_temppath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creating a temperarly path for a temperary file</span>
<span class="sd">        :param filename: String name for file</span>
<span class="sd">        :type filename: str, QString</span>

<span class="sd">        :returns: string of full path</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">tmpdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tempfile</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">(),</span><span class="s1">&#39;Tilgjengelighet&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">)</span>
        <span class="n">tmpfile</span><span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tmpfile</span></div>


<div class="viewcode-block" id="Tilgjengelighet.to_unicode"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.to_unicode">[docs]</a>    <span class="k">def</span> <span class="nf">to_unicode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Transforme string to unicode</span>

<span class="sd">        :param in_string: String to transforme</span>

<span class="sd">        :returns: unicode verson of string</span>
<span class="sd">        :rtype: unicode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_string</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="n">out_string</span> <span class="o">=</span> <span class="n">in_string</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_string</span><span class="p">,</span><span class="n">unicode</span><span class="p">):</span>
            <span class="n">out_string</span> <span class="o">=</span> <span class="n">in_string</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;not stringy&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out_string</span></div>


<div class="viewcode-block" id="Tilgjengelighet.updateDataReadProgress"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.updateDataReadProgress">[docs]</a>    <span class="k">def</span> <span class="nf">updateDataReadProgress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytesRead</span><span class="p">,</span> <span class="n">totalBytes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Updates the dataprogess of downwloading data&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_Progress</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_Progress</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Laster inn data: &quot;</span><span class="p">)</span> <span class="c1"># + self.featuretype.getFeatureType())</span></div>

<div class="viewcode-block" id="Tilgjengelighet.httpRequestStartet"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.httpRequestStartet">[docs]</a>    <span class="k">def</span> <span class="nf">httpRequestStartet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calls when reqest has started&quot;&quot;&quot;</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The Request has started!&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tilgjengelighet.httpRequestFinished"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.httpRequestFinished">[docs]</a>    <span class="k">def</span> <span class="nf">httpRequestFinished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">requestId</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calls when reqest is finnished&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">requestId</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">httpGetId</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;requesrtd Id != httpGetId&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">outFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;error in requestFinished&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">errorString</span><span class="p">())</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outFile</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gdaltimeout</span> <span class="o">=</span> <span class="s2">&quot;5&quot;</span>
            <span class="n">gdal</span><span class="o">.</span><span class="n">SetConfigOption</span><span class="p">(</span><span class="s2">&quot;GDAL_HTTP_TIMEOUT&quot;</span><span class="p">,</span> <span class="n">gdaltimeout</span><span class="p">)</span>
            <span class="n">gdal</span><span class="o">.</span><span class="n">SetConfigOption</span><span class="p">(</span><span class="s1">&#39;GML_SKIP_RESOLVE_ELEMS&#39;</span><span class="p">,</span> <span class="s1">&#39;ALL&#39;</span><span class="p">)</span>
            <span class="n">gdal</span><span class="o">.</span><span class="n">SetConfigOption</span><span class="p">(</span><span class="s1">&#39;GML_ATTRIBUTES_TO_OGR_FIELDS&#39;</span><span class="p">,</span> <span class="s1">&#39;NO&#39;</span><span class="p">)</span>
            <span class="n">nasdetectionstring</span> <span class="o">=</span> <span class="s1">&#39;asdf/asdf/asdf&#39;</span>
            <span class="n">gdal</span><span class="o">.</span><span class="n">SetConfigOption</span><span class="p">(</span><span class="s1">&#39;NAS_INDICATOR&#39;</span><span class="p">,</span> <span class="n">nasdetectionstring</span><span class="p">)</span>
            
            <span class="n">ogrdriver</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="s2">&quot;GML&quot;</span><span class="p">)</span>
            <span class="n">ogrdatasource</span> <span class="o">=</span> <span class="n">ogrdriver</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outFile</span><span class="o">.</span><span class="n">fileName</span><span class="p">())</span>
            
            <span class="k">if</span> <span class="n">ogrdatasource</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ogrdatasource is None&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="c1"># Determine the LayerCount</span>
                <span class="n">ogrlayercount</span> <span class="o">=</span> <span class="n">ogrdatasource</span><span class="o">.</span><span class="n">GetLayerCount</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ogrlayercount</span><span class="p">):</span>
                    <span class="n">j</span> <span class="o">=</span> <span class="n">ogrlayercount</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-</span> <span class="n">i</span>
                    <span class="n">ogrlayer</span> <span class="o">=</span> <span class="n">ogrdatasource</span><span class="o">.</span><span class="n">GetLayerByIndex</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
                    <span class="n">ogrlayername</span> <span class="o">=</span> <span class="n">ogrlayer</span><span class="o">.</span><span class="n">GetName</span><span class="p">()</span>
                    <span class="n">ogrgeometrytype</span> <span class="o">=</span> <span class="n">ogrlayer</span><span class="o">.</span><span class="n">GetGeomType</span><span class="p">()</span>
                    <span class="n">geomtypeids</span> <span class="o">=</span> <span class="p">[]</span>
                    
                    <span class="k">if</span> <span class="n">ogrgeometrytype</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                        <span class="n">geomtypeids</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;100&quot;</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">geomtypeids</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">ogrgeometrytype</span><span class="p">)]</span>
                    
                    <span class="k">for</span> <span class="n">geomtypeid</span> <span class="ow">in</span> <span class="n">geomtypeids</span><span class="p">:</span>
                        <span class="n">qgislayername</span> <span class="o">=</span> <span class="n">ogrlayername</span>
                        <span class="n">uri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outFile</span><span class="o">.</span><span class="n">fileName</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;|layerid=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">geomtypeids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                            <span class="n">uri</span> <span class="o">+=</span> <span class="s2">&quot;|subset=&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">getsubset</span><span class="p">(</span><span class="n">geomtypeid</span><span class="p">)</span>
                        
                        <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">QgsVectorLayer</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">qgislayername</span><span class="p">,</span> <span class="s2">&quot;ogr&quot;</span><span class="p">))</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">setProviderEncoding</span><span class="p">(</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span>
                        
                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">isValid</span><span class="p">():</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;self.vlayer not valid&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">featurecount</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">featureCount</span><span class="p">()</span>
                            <span class="k">if</span> <span class="n">featurecount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="k">pass</span>
                            
                            <span class="c1">#fill comboboxes</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;TettstedInngangBygg&quot;</span><span class="p">:</span>
                                <span class="c1">#self.fill_fylker()</span>
                                <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_inngang_gui</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">att</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(),</span> <span class="n">att</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">())</span>
                                <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_inngang_mer_mindre</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox_mer_mindre</span><span class="p">(</span><span class="n">att</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">())</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">toggle_enable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attributes_inngang</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="c1">#enable gui</span>
                            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;TettstedVei&quot;</span><span class="p">:</span>
                                <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_vei_gui</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">att</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(),</span> <span class="n">att</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">())</span>
                                <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_vei_mer_mindre</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox_mer_mindre</span><span class="p">(</span><span class="n">att</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">())</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">toggle_enable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attributes_vei</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="c1">#enable gui</span>
                            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;TettstedHCparkering&quot;</span><span class="p">:</span>
                                <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_hcparkering_gui</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">att</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(),</span> <span class="n">att</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">())</span>
                                <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_hcparkering_mer_mindre</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox_mer_mindre</span><span class="p">(</span><span class="n">att</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">())</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">toggle_enable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attributes_hcparkering</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="c1">#enable gui</span>
                            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">())</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="s2">&quot;TettstedParkeringsomrÃ¥de&quot;</span><span class="p">):</span>
                                <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_pomrade_gui</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">att</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(),</span> <span class="n">att</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">())</span>
                                <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_pomrade_mer_mindre</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox_mer_mindre</span><span class="p">(</span><span class="n">att</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">())</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">toggle_enable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attributes_pomrade</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="c1">#enable gui</span>

                            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_Progress</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                            <span class="k">for</span> <span class="n">baselayer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">:</span>
                                <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">baselayer</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">hideLayer</span><span class="p">(</span><span class="n">baselayer</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">legendInterface</span><span class="p">()</span><span class="o">.</span><span class="n">setLayerVisible</span><span class="p">(</span><span class="n">baselayer</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

                            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">pushButton_filtrer</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tilgjengelighet.getFeatures"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.getFeatures">[docs]</a>    <span class="k">def</span> <span class="nf">getFeatures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">featuretype</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This code is taken and adjusted from WFS 2.0 Client writen by Juergen Weichand</span>
<span class="sd">        Getting features for TilgjengelighetTettsted, modifye to include friluft&quot;&quot;&quot;</span>

        <span class="n">namespace</span> <span class="o">=</span> <span class="s2">&quot;http://skjema.geonorge.no/SOSI/produktspesifikasjon/TilgjengelighetTettsted/4.5&quot;</span>
        <span class="n">namespace_prefix</span> <span class="o">=</span> <span class="s2">&quot;app&quot;</span>
        <span class="n">online_resource</span> <span class="o">=</span> <span class="s2">&quot;https://wfs.geonorge.no/skwms1/wfs.tilgjengelighettettsted&quot;</span>
        <span class="n">typeNames</span><span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">featuretype</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">))</span>
       
        <span class="n">query_string</span> <span class="o">=</span> <span class="s2">&quot;?service=WFS&amp;request=GetFeature&amp;version=2.0.0&amp;srsName=</span><span class="si">{0}</span><span class="s2">&amp;typeNames=</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="s2">&quot;urn:ogc:def:crs:EPSG::</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mapCanvas</span><span class="p">()</span><span class="o">.</span><span class="n">mapRenderer</span><span class="p">()</span><span class="o">.</span><span class="n">destinationCrs</span><span class="p">()</span><span class="o">.</span><span class="n">postgisSrid</span><span class="p">()))</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">typeNames</span><span class="p">)</span>
        <span class="n">query_string</span> <span class="o">+=</span> <span class="s2">&quot;&amp;namespaces=xmlns(</span><span class="si">{0}</span><span class="s2">,</span><span class="si">{1}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">namespace_prefix</span><span class="p">,</span> <span class="n">urllib</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">))</span>
        <span class="n">query_string</span><span class="o">+=</span> <span class="s2">&quot;&amp;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">httpGetId</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">http</span> <span class="o">=</span> <span class="n">QHttp</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">requestStarted</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">httpRequestStartet</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">requestFinished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">httpRequestFinished</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">dataReadProgress</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateDataReadProgress</span><span class="p">)</span>

        <span class="n">layername</span><span class="o">=</span><span class="s2">&quot;wfs</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_uppercase</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">digits</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)))</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_temppath</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">.gml&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">layername</span><span class="p">))</span>

        <span class="c1">#downloadFile</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">QUrl</span><span class="p">(</span><span class="n">online_resource</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;url: &quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;online resource: &quot;</span><span class="p">,</span> <span class="n">online_resource</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;query string: &quot;</span><span class="p">,</span> <span class="n">query_string</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">QFile</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">fileName</span><span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;File  Exists&quot;</span><span class="p">)</span>
                    <span class="n">QFile</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">outFile</span> <span class="o">=</span> <span class="n">QFile</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>

        <span class="n">port</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">port</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">port</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">port</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">setHost</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">host</span><span class="p">(),</span> <span class="n">QHttp</span><span class="o">.</span><span class="n">ConnectionModeHttps</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span> <span class="c1">#starting request</span>
        <span class="c1">#print(&quot;url.path: &quot;, url.path())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">httpGetId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="p">()</span> <span class="o">+</span> <span class="n">query_string</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">outFile</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;url: &quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="p">()</span> <span class="o">+</span> <span class="n">query_string</span><span class="p">)</span></div>
        <span class="c1">#print(&quot;httpGetId&quot;, self.httpGetId)</span>
        

<div class="viewcode-block" id="Tilgjengelighet.hentData"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.hentData">[docs]</a>    <span class="k">def</span> <span class="nf">hentData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Getting data based on current tab index&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">feature_type_tettsted</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">())])</span> <span class="c1">#sending featuretype based on current tab index</span></div>


    <span class="k">def</span> <span class="nf">hideNode</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">bHide</span><span class="o">=</span><span class="kc">True</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span> <span class="n">node</span> <span class="p">)</span> <span class="ow">in</span> <span class="p">(</span> <span class="n">QgsLayerTreeLayer</span><span class="p">,</span> <span class="n">QgsLayerTreeGroup</span> <span class="p">):</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">node2index</span><span class="p">(</span> <span class="n">node</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ltv</span><span class="o">.</span><span class="n">setRowHidden</span><span class="p">(</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">(),</span> <span class="n">index</span><span class="o">.</span><span class="n">parent</span><span class="p">(),</span> <span class="n">bHide</span> <span class="p">)</span>
            <span class="n">node</span><span class="o">.</span><span class="n">setCustomProperty</span><span class="p">(</span> <span class="s1">&#39;nodeHidden&#39;</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span> <span class="k">if</span> <span class="n">bHide</span> <span class="k">else</span> <span class="s1">&#39;false&#39;</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ltv</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">node2index</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="p">)</span> <span class="p">)</span>

<div class="viewcode-block" id="Tilgjengelighet.hideLayer"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.hideLayer">[docs]</a>    <span class="k">def</span> <span class="nf">hideLayer</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">mapLayer</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Hides a layer that is in layerpanel&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">mapLayer</span><span class="p">,</span> <span class="n">QgsMapLayer</span> <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hideNode</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">findLayer</span><span class="p">(</span> <span class="n">mapLayer</span><span class="o">.</span><span class="n">id</span><span class="p">()</span> <span class="p">)</span> <span class="p">)</span></div>

    <span class="c1">#NOTE: make generic hide/show modules</span>
<div class="viewcode-block" id="Tilgjengelighet.hide_show_rampe"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.hide_show_rampe">[docs]</a>    <span class="k">def</span> <span class="nf">hide_show_rampe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Hides or shows rampe&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rampe</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Ja&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rampe_boxs</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_rmp_stigning</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_stigning</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rmp_stigning</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_rmp_bredde</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_bredde</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rmp_bredde</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_handliste</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_handliste</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_hand1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_hand1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_hand1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_hand2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_hand2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_hand2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_tilgjengelig</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rmp_tilgjengelig</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">line_4</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rampe_boxs</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_rmp_stigning</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_stigning</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rmp_stigning</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_rmp_bredde</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_bredde</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rmp_bredde</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_handliste</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_handliste</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_hand1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_hand1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_hand1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_hand2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_hand2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_hand2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_tilgjengelig</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rmp_tilgjengelig</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>


            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">line_4</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">hide_show_nedsenkning</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_gatetype</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uspesifisert</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_nedsenkning1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_nedsenkning1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_nedsenkning1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_nedsenkning2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_nedsenkning2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_nedsenkning2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_nedsenkning1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_nedsenkning1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_nedsenkning1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_nedsenkning2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_nedsenkning2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_nedsenkning2</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">hide_show_merket</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_merket</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Ja&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_bredde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_bredde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_bredde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_lengde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_lengde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_lengde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_bredde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_bredde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_bredde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_lengde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_lengde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_lengde_vei</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>


<div class="viewcode-block" id="Tilgjengelighet.toggle_enable"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.toggle_enable">[docs]</a>    <span class="k">def</span> <span class="nf">toggle_enable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attributes</span><span class="p">,</span> <span class="n">tr_or_fl</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enabels or disabels gui_attributes</span>

<span class="sd">        :param attributes: list of attributes that are to be enabeld or disabeld</span>
<span class="sd">        :type attributes: list&lt;AttributeForms&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">att</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">():</span>
                <span class="n">att</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">()</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">tr_or_fl</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">att</span><span class="o">.</span><span class="n">getLineEdit</span><span class="p">():</span>
                <span class="n">att</span><span class="o">.</span><span class="n">getLineEdit</span><span class="p">()</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">tr_or_fl</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tilgjengelighet.get_previus_search_activeLayer"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.get_previus_search_activeLayer">[docs]</a>    <span class="k">def</span> <span class="nf">get_previus_search_activeLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open filtering window set to preweus choises&quot;&quot;&quot;</span>

        <span class="n">activeLayer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">activeLayer</span><span class="p">()</span>
        <span class="c1">#if self.search_history[activeLayer.name()]:</span>
        <span class="k">if</span> <span class="n">activeLayer</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">pre_search</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">[</span><span class="n">activeLayer</span><span class="o">.</span><span class="n">name</span><span class="p">()]</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">pre_search</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                    <span class="n">key</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">()</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                    <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="n">key</span><span class="o">.</span><span class="n">getLineEdit</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">pre_search</span><span class="o">.</span><span class="n">tabIndex_main</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">pre_search</span><span class="o">.</span><span class="n">tabIndex_friluft</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">pre_search</span><span class="o">.</span><span class="n">tabIndex_tettsted</span><span class="p">)</span>
                <span class="n">pre_search</span><span class="o">.</span><span class="n">lineEdit_seach</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">pre_search</span><span class="o">.</span><span class="n">search_name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">raise</span></div>



<div class="viewcode-block" id="Tilgjengelighet.table_item_clicked"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.table_item_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">table_item_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Action for item click in table. Selects corrisponding object in map, and fills info widget with its data&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">setSelectedFeatures</span><span class="p">([])</span> <span class="c1">#Disabels all selections in current search layer</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> 
            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">indexes</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">setSelectedFeatures</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">feature_id</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()]])</span></div>
  


    <span class="c1">#def set_availebility_icon(self, feature, tilgjenglighetsvurdering, icon, images, button):</span>
<div class="viewcode-block" id="Tilgjengelighet.set_availebility_icon"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.set_availebility_icon">[docs]</a>    <span class="k">def</span> <span class="nf">set_availebility_icon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tilgjenglighetsvurdering</span><span class="p">,</span> <span class="n">icons</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to set wheter object is availeble or not, not currently in use&quot;&quot;&quot;</span>
        <span class="n">button</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">icons</span><span class="p">[</span><span class="n">tilgjenglighetsvurdering</span><span class="p">])</span>
        <span class="n">image_tilgjengelig</span> <span class="o">=</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">image_vanskeligTilgjengelig</span> <span class="o">=</span> <span class="n">images</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">image_ikkeTilgjengelig</span> <span class="o">=</span> <span class="n">images</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">image_ikkeVurdert</span> <span class="o">=</span> <span class="n">images</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">tilgjenglighetsvurdering</span> <span class="o">==</span> <span class="s2">&quot;tilgjengelig&quot;</span><span class="p">:</span>
            <span class="n">button</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">image_tilgjengelig</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">tilgjenglighetsvurdering</span> <span class="o">==</span> <span class="s2">&quot;ikkeTilgjengelig&quot;</span><span class="p">:</span>
            <span class="n">button</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">image_ikkeTilgjengelig</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">tilgjenglighetsvurdering</span> <span class="o">==</span> <span class="s2">&quot;vanskeligTilgjengelig&quot;</span><span class="p">:</span>
            <span class="n">button</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">image_vanskeligTilgjengelig</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">button</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">image_ikkeVurdert</span><span class="p">)</span></div>



<div class="viewcode-block" id="Tilgjengelighet.fill_combobox"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.fill_combobox">[docs]</a>    <span class="k">def</span> <span class="nf">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="n">feat_name</span><span class="p">,</span> <span class="n">combobox</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Filling out comboboxes based in features in layer</span>

<span class="sd">        :param layer: the layer that holds the attributes</span>
<span class="sd">        :param feat_name: the name of the feat that the attributes should be gatherd from</span>
<span class="sd">        :param combobox: The combobox to fill</span>

<span class="sd">        :type layer: qgis._core.QgsVectorLayer</span>
<span class="sd">        :type feat_name: str</span>
<span class="sd">        :type combobox: QComboBox</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">combobox</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">combobox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uspesifisert</span><span class="p">)</span>
        
        <span class="n">feat_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="n">feat_name</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">layer</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">():</span> <span class="c1">#Sett inn error catchment her</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">feature</span><span class="p">[</span><span class="n">feat_name</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Layer does not contain given key&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">QPyNullVariant</span><span class="p">)</span> <span class="ow">and</span> <span class="n">combobox</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">combobox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tilgjengelighet.fill_combobox_mer_mindre"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.fill_combobox_mer_mindre">[docs]</a>    <span class="k">def</span> <span class="nf">fill_combobox_mer_mindre</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">combobox</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fill combobox with defult text</span>

<span class="sd">        :param combobx: QComboBox</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">combobox</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">combobox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mer</span><span class="p">)</span>
        <span class="n">combobox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mindre</span><span class="p">)</span>
        <span class="n">combobox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mer_eller_lik</span><span class="p">)</span>
        <span class="n">combobox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mindre_eller_lik</span><span class="p">)</span></div>
        
        

<div class="viewcode-block" id="Tilgjengelighet.showResults"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.showResults">[docs]</a>    <span class="k">def</span> <span class="nf">showResults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Presenting the result of a seach in a table</span>

<span class="sd">        :param layer: search result</span>
<span class="sd">        :type layer: qgis._core.QgsVectorLayer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#reset table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="c1">#Create data providers</span>
        <span class="n">prov</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">dataProvider</span><span class="p">()</span>
        <span class="n">feat</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">()</span>
        
        <span class="c1">#Create colums</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrColumn</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">prov</span><span class="o">.</span><span class="n">fields</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prov</span><span class="o">.</span><span class="n">fields</span><span class="p">()))</span> <span class="c1">#creating colums</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">prov</span><span class="o">.</span><span class="n">fields</span><span class="p">())):</span> <span class="c1">#creating header in table         </span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">prov</span><span class="o">.</span><span class="n">fields</span><span class="p">()</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">()))</span>

        <span class="c1"># creating rows</span>
        <span class="n">nr_objects</span>  <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">feat</span><span class="p">:</span>
            <span class="n">nr_objects</span> <span class="o">=</span> <span class="n">nr_objects</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="n">nr_objects</span><span class="p">)</span>
        
        <span class="c1"># filling table values</span>
        <span class="n">current_object</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">feature_id</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">feat</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">()</span> <span class="c1">#resetting iterator</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">feat</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">feature_id</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="s1">&#39;gml_id&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">id</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">prov</span><span class="o">.</span><span class="n">fields</span><span class="p">())):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">QDateTime</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">isNull</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">current_object</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;NULL&quot;</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">current_object</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="s1">&#39;dd.MM.yy&#39;</span><span class="p">)))</span>
                <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="s1">&#39;toString&#39;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">current_object</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">toString</span><span class="p">()))</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">long</span><span class="p">)):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">current_object</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">])))</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">QPyNullVariant</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">current_object</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;NULL&quot;</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">current_object</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>

            <span class="n">current_object</span> <span class="o">=</span> <span class="n">current_object</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span> <span class="c1">#enabeling sorting</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addDockWidget</span><span class="p">(</span> <span class="n">Qt</span><span class="o">.</span><span class="n">BottomDockWidgetArea</span> <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dock</span> <span class="p">)</span> <span class="c1">#adding seartch result Widget</span></div>


<div class="viewcode-block" id="Tilgjengelighet.fill_infoWidget"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.fill_infoWidget">[docs]</a>    <span class="k">def</span> <span class="nf">fill_infoWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attributes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Filling infowidget with attributes name and no value. Also ajustes size of infowidget</span>

<span class="sd">        :param attributes: List of gui attriibutes</span>
<span class="sd">        :type attributes: list&lt;AttributeForms&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># for i in range(0, self.infoWidget.gridLayout.rowCount()): #Clears infowidget</span>
        <span class="c1">#     self.infoWidget.gridLayout.itemAtPosition(i, 0).widget().setText(&quot;&quot;)</span>
        <span class="c1">#     self.infoWidget.gridLayout.itemAtPosition(i, 1).widget().setText(&quot;&quot;)</span>
        <span class="c1">#     #self.infoWidget.gridLayout.itemAtPosition(i, 2).widget().setText(&quot;&quot;)</span>

        <span class="c1"># for i in range(0,len(attributes)): #Fills infowidgets and add new rows if needed</span>

        <span class="c1">#     if i &lt; self.infoWidget.gridLayout.rowCount():</span>
        <span class="c1">#         self.infoWidget.gridLayout.itemAtPosition(i, 0).widget().setText(attributes[i].getAttribute())</span>
        <span class="c1">#         self.infoWidget.gridLayout.itemAtPosition(i, 1).widget().setText(&quot;-&quot;)</span>

        <span class="c1">#         self.infoWidget.gridLayout.itemAtPosition(i, 0).widget().setVisible(True)</span>
        <span class="c1">#         self.infoWidget.gridLayout.itemAtPosition(i, 1).widget().setVisible(True)</span>
        <span class="c1">#     else:</span>
        <span class="c1">#         self.infoWidget.gridLayout.addWidget(QLabel(attributes[i].getAttribute()), i, 0)</span>
        <span class="c1">#         self.infoWidget.gridLayout.addWidget(QLabel(&quot;-&quot;), i, 1)</span>

        <span class="c1"># for i in range(len(attributes), self.infoWidget.gridLayout.rowCount()): #Hides rows that are not used</span>
        <span class="c1">#     self.infoWidget.gridLayout.itemAtPosition(i, 0).widget().setVisible(False)</span>
        <span class="c1">#     self.infoWidget.gridLayout.itemAtPosition(i, 1).widget().setVisible(False)</span>

        <span class="c1">#TEST</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">attributes</span><span class="p">)):</span>
            <span class="c1">#print(i)</span>
            <span class="c1">#print(&quot;widget: &quot;, self.infoWidget.gridLayout.itemAtPosition(i, 0).widget(), &quot;type; &quot;, type(self.infoWidget.gridLayout.itemAtPosition(i, 0).widget()))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">attributes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">attributes</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">rowCount</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">attributes</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>



<div class="viewcode-block" id="Tilgjengelighet.fill_fylker"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.fill_fylker">[docs]</a>    <span class="k">def</span> <span class="nf">fill_fylker</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fill up the combobox fylker with fylker from komm.txt&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Norge&quot;</span><span class="p">)</span>

        <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="s2">&quot;\komm.txt&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nr</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nm</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">komm_nr</span><span class="p">,</span> <span class="n">komune</span><span class="p">,</span> <span class="n">fylke</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">((</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">))</span>
                <span class="n">komm_nr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="n">komm_nr</span><span class="p">)</span>
                <span class="n">komune</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="n">komune</span><span class="p">)</span>
                <span class="n">fylke</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="n">fylke</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nr</span><span class="p">[</span><span class="n">komm_nr</span><span class="p">]</span> <span class="o">=</span> <span class="n">komune</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nm</span><span class="p">[</span><span class="n">komune</span><span class="p">]</span> <span class="o">=</span> <span class="n">komm_nr</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">fylke</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">fylke</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">komm_nr</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tilgjengelighet.fylke_valgt"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.fylke_valgt">[docs]</a>    <span class="k">def</span> <span class="nf">fylke_valgt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fill uo komune combobox with kommune in chosen fylke&quot;&quot;&quot;</span>
        <span class="n">fylke</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_komuner</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_komuner</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uspesifisert</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fylke</span> <span class="o">!=</span> <span class="s2">&quot;Norge&quot;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">komune_nr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_komuner</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nr</span><span class="p">[</span><span class="n">komune_nr</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>

<div class="viewcode-block" id="Tilgjengelighet.komune_valgt"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.komune_valgt">[docs]</a>    <span class="k">def</span> <span class="nf">komune_valgt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Alter the name on seach after kommune is chosen&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_komuner</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_komuner</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span></div>


<div class="viewcode-block" id="Tilgjengelighet.change_search_name"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.change_search_name">[docs]</a>    <span class="k">def</span> <span class="nf">change_search_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Changes the name of search baes on current tab and fyle and kommune&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;Norge&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_komuner</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_komuner</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span></div>



<div class="viewcode-block" id="Tilgjengelighet.create_where_statement"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.create_where_statement">[docs]</a>    <span class="k">def</span> <span class="nf">create_where_statement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attributes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a where statement for search</span>
<span class="sd">        :param attributes:</span>
<span class="sd">        :type attributes: list&lt;AttributeForms&gt;</span>

<span class="sd">        :returns: a where statement string sorted after given attributes</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">fylke</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">komune</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_komuner</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">where</span> <span class="o">=</span>  <span class="s2">&quot;WHERE lokalId &gt; 0&quot;</span>

        <span class="k">if</span> <span class="n">fylke</span> <span class="o">!=</span> <span class="s2">&quot;Norge&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">komune</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">uspesifisert</span><span class="p">:</span>
                <span class="n">where</span> <span class="o">=</span> <span class="n">where</span> <span class="o">+</span> <span class="s2">&quot; AND &quot;</span> <span class="o">+</span> <span class="s2">&quot;(kommune = &#39;</span><span class="si">{0}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">komune_nr</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                    <span class="n">where</span> <span class="o">=</span> <span class="n">where</span> <span class="o">+</span> <span class="s2">&quot; OR kommune = &#39;</span><span class="si">{0}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">][</span><span class="n">komune_nr</span><span class="p">])</span>
                <span class="n">where</span> <span class="o">=</span> <span class="n">where</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">where</span> <span class="o">=</span> <span class="n">where</span> <span class="o">+</span> <span class="s2">&quot; AND &quot;</span> <span class="o">+</span> <span class="s2">&quot;kommune = &#39;</span><span class="si">{0}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nm</span><span class="p">[</span><span class="n">komune</span><span class="p">])</span>

        <span class="c1">#onde_atributter = [&quot;dørtype&quot;, &quot;terskelHøyde&quot;, &quot;håndlist&quot;, &quot;håndlistHøyde1&quot;, &quot;håndlistHøyde2&quot;]</span>
        <span class="c1">#one_att_dict = {&quot;dørtype&quot; : &quot;d_rtype&quot;, &quot;terskelHøyde&quot; : &quot;terskelH_yde&quot;, &quot;håndlist&quot; : &quot;h_ndlist&quot;, &quot;håndlistHøyde1&quot; : &quot;h_ndlistH_yde1&quot;, &quot;håndlistHøyde2&quot; : &quot;h_ndlistH_yde2&quot;}</span>
        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getLineEdit</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getComboBoxCurrentText</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uspesifisert</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">where</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;WHERE </span><span class="si">%s</span><span class="s2"> = &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">attribute</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getComboBoxCurrentText</span><span class="p">())</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">where</span> <span class="o">=</span>  <span class="n">where</span> <span class="o">+</span> <span class="s2">&quot; AND &quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">attribute</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getComboBoxCurrentText</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getLineEditText</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uspesifisert</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">where</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;WHERE </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">attribute</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getComboBoxCurrentText</span><span class="p">(),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getLineEditText</span><span class="p">())</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">where</span> <span class="o">=</span> <span class="n">where</span> <span class="o">+</span> <span class="s2">&quot; AND &quot;</span> <span class="o">+</span>  <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">attribute</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getComboBoxCurrentText</span><span class="p">(),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getLineEditText</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">where</span></div>

<div class="viewcode-block" id="Tilgjengelighet.create_where_statement2"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.create_where_statement2">[docs]</a>    <span class="k">def</span> <span class="nf">create_where_statement2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attributes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create an optinal where statement for search</span>
<span class="sd">        :param attributes:</span>
<span class="sd">        :type attributes: list&lt;AttributeForms&gt;</span>

<span class="sd">        :returns: a where statement string sorted after given attributes</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fylke</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">komune</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_komuner</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fylke</span> <span class="o">!=</span> <span class="s2">&quot;Norge&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">komune</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">uspesifisert</span><span class="p">:</span>
                <span class="n">where</span> <span class="o">=</span> <span class="n">where</span> <span class="o">+</span> <span class="s2">&quot; (</span><span class="se">\&quot;</span><span class="s2">kommune</span><span class="se">\&quot;</span><span class="s2">=</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">komune_nr</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                    <span class="n">where</span> <span class="o">=</span> <span class="n">where</span> <span class="o">+</span> <span class="s2">&quot; OR </span><span class="se">\&quot;</span><span class="s2">kommune</span><span class="se">\&quot;</span><span class="s2">=</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">][</span><span class="n">komune_nr</span><span class="p">])</span>
                <span class="n">where</span> <span class="o">=</span> <span class="n">where</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">where</span> <span class="o">=</span> <span class="n">where</span> <span class="o">+</span> <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">kommune</span><span class="se">\&quot;</span><span class="s2">=</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nm</span><span class="p">[</span><span class="n">komune</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot; </span><span class="se">\&quot;</span><span class="s2">kommune</span><span class="se">\&quot;</span><span class="s2"> &gt; 0&quot;</span>

        <span class="c1">#onde_atributter = [&quot;dørtype&quot;, &quot;terskelHøyde&quot;, &quot;håndlist&quot;, &quot;håndlistHøyde1&quot;, &quot;håndlistHøyde2&quot;]</span>
        <span class="c1">#one_att_dict = {&quot;dørtype&quot; : &quot;d_rtype&quot;, &quot;terskelHøyde&quot; : &quot;terskelH_yde&quot;, &quot;håndlist&quot; : &quot;h_ndlist&quot;, &quot;håndlistHøyde1&quot; : &quot;h_ndlistH_yde1&quot;, &quot;håndlistHøyde2&quot; : &quot;h_ndlistH_yde2&quot;}</span>
        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getLineEdit</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getComboBoxCurrentText</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uspesifisert</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">where</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> = &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">attribute</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getComboBoxCurrentText</span><span class="p">())</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">where</span> <span class="o">=</span>  <span class="n">where</span> <span class="o">+</span> <span class="s2">&quot; AND &quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> = &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">attribute</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getComboBoxCurrentText</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getLineEditText</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uspesifisert</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">where</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">attribute</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getComboBoxCurrentText</span><span class="p">(),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getLineEditText</span><span class="p">())</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">where</span> <span class="o">=</span> <span class="n">where</span> <span class="o">+</span> <span class="s2">&quot; AND &quot;</span> <span class="o">+</span>  <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">attribute</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getComboBoxCurrentText</span><span class="p">(),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getLineEditText</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">where</span></div>



<div class="viewcode-block" id="Tilgjengelighet.filtrer"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.filtrer">[docs]</a>    <span class="k">def</span> <span class="nf">filtrer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attributes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Goes throu all atributes in current tab, creates a where statement and create layer based on that&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Filtering Start&quot;</span><span class="p">)</span>

        <span class="c1"># msg = QMessageBox()</span>
        <span class="c1"># msg.setText(&quot;Filtrerer, venligst vent&quot;)</span>
        <span class="c1"># msg.open()</span>
    
        <span class="n">sok_metode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_sok_metode</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="c1">#henter hvilke metode som benyttes(virtuelt eller memory)</span>
        <span class="n">layer_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span> <span class="c1">#setter navn på laget</span>
        <span class="n">search_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">())</span> <span class="c1">#henter hvilke søk som blir gjort (må spesifisere esenere for tettsted eller friluft)</span>
        <span class="n">search_type_pomrade</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">#setter egen for pområde pga problemer med norske bokstaver</span>

        <span class="c1">#setter baselayre basert på søketypen</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">search_type</span> <span class="o">==</span> <span class="s2">&quot;Vei&quot;</span><span class="p">:</span>
                <span class="n">baselayer</span> <span class="o">=</span> <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">mapLayersByName</span><span class="p">(</span><span class="s1">&#39;TettstedVei&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_vei</span>
            <span class="k">elif</span> <span class="n">search_type</span> <span class="o">==</span> <span class="s2">&quot;Inngang&quot;</span><span class="p">:</span>
                <span class="n">baselayer</span> <span class="o">=</span> <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">mapLayersByName</span><span class="p">(</span><span class="s1">&#39;TettstedInngangBygg&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_inngang</span>
            <span class="k">elif</span> <span class="n">search_type</span> <span class="o">==</span> <span class="s2">&quot;HC-Parkering&quot;</span><span class="p">:</span>
                <span class="n">baselayer</span> <span class="o">=</span> <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">mapLayersByName</span><span class="p">(</span><span class="s1">&#39;TettstedHCparkering&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_hcparkering</span>
            <span class="k">elif</span> <span class="n">search_type</span> <span class="o">==</span> <span class="n">search_type_pomrade</span><span class="p">:</span>
                <span class="n">baselayer</span> <span class="o">=</span> <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">mapLayersByName</span><span class="p">(</span><span class="s1">&#39;TettstedParkeringsomr</span><span class="se">\xc3\xa5</span><span class="s1">de&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_pomrade</span>
        <span class="k">except</span> <span class="ne">IndexError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span><span class="s2">&quot;Kan ikke filtrere uten data, venligst hent data og prøv igjen&quot;</span><span class="p">,</span> <span class="n">msg_title</span><span class="o">=</span><span class="s2">&quot;Manger Data&quot;</span><span class="p">,</span> <span class="n">msg_type</span><span class="o">=</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span>
            <span class="c1">#QMessageBox.warning(self.iface.mainWindow(), &quot;Mangler data, hent data før filtrering&quot;)</span>
            <span class="k">return</span>
        

        <span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span> <span class="o">=</span> <span class="n">attributes</span>
        <span class="c1">#self.sourceMapTool = IdentifyGeometry(self.canvas, self.infoWidget, self.current_attributes, pickMode=&#39;selection&#39;) #For selecting abject in map and showing data</span>
        
        <span class="c1">#fylke = self.dlg.comboBox_fylker.currentText()</span>
        <span class="c1">#komune = self.dlg.comboBox_komuner.currentText()</span>

        <span class="c1">#genererer express string og where spørringer med komuner</span>
        <span class="n">expr_string</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_where_statement2</span><span class="p">(</span><span class="n">attributes</span><span class="p">)</span>
        
        <span class="n">where</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_where_statement</span><span class="p">(</span><span class="n">attributes</span><span class="p">)</span>

        <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;expr_string: &quot;</span><span class="p">,</span> <span class="n">expr_string</span><span class="p">,</span> <span class="s2">&quot; where: &quot;</span><span class="p">,</span> <span class="n">where</span><span class="p">)</span>
        

        <span class="c1">#genererer express string og where spørringer basert på tilstndte attributter</span>
        <span class="c1">#for attribute in attributes:</span>
        <span class="c1">#    where = self.create_where_statement(attribute, where)</span>
        <span class="c1">#    expr_string = self.create_where_statement2(attribute, expr_string)</span>

        <span class="c1">#Genererer lag basert på virtuell metode eller memory metode</span>
        <span class="k">if</span> <span class="n">sok_metode</span> <span class="o">==</span> <span class="s2">&quot;virtual&quot;</span><span class="p">:</span>
            
            <span class="n">layer_name_text</span> <span class="o">=</span> <span class="n">layer_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;Virtual&quot;</span>
            <span class="n">base_layer_name</span> <span class="o">=</span> <span class="n">baselayer</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
            <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM &quot;</span> <span class="o">+</span> <span class="n">base_layer_name</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">where</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span> <span class="o">=</span> <span class="n">QgsVectorLayer</span><span class="p">(</span><span class="s2">&quot;?query=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">query</span><span class="p">),</span> <span class="n">layer_name_text</span><span class="p">,</span> <span class="s2">&quot;virtual&quot;</span> <span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">featureCount</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="c1">#Lager lag hvis noen objecter er funnet</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">mapLayersByName</span><span class="p">(</span><span class="n">layer_name_text</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">removeMapLayer</span><span class="p">(</span> <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">mapLayersByName</span><span class="p">(</span><span class="n">layer_name_text</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">()</span> <span class="p">)</span> <span class="c1">#Fjerner lag med samme navn, for å ungå duplicates</span>
                    <span class="k">except</span> <span class="p">(</span><span class="ne">RuntimeError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

                <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="p">)</span> <span class="c1">#Legger inn nytt lag</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fill_infoWidget</span><span class="p">(</span><span class="n">attributes</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">setExtent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">extent</span><span class="p">())</span> <span class="c1">#zoomer inn på nytt lag</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addDockWidget</span><span class="p">(</span> <span class="n">Qt</span><span class="o">.</span><span class="n">LeftDockWidgetArea</span> <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span> <span class="p">)</span> <span class="c1">#legger inn infowidget</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="p">)</span> <span class="c1">#Legger inn tabell</span>
                <span class="c1">#self.sourceMapTool.setLayer(self.current_search_layer) #new layer target for tools</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">[</span><span class="n">layer_name_text</span><span class="p">]</span> <span class="o">=</span> <span class="n">SavedSearch</span><span class="p">(</span><span class="n">layer_name_text</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="p">,</span> <span class="n">layer_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">())</span> <span class="c1">#lagerer søkets tab indes, lagnavn og lag referanse</span>
                <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span> <span class="c1">#lagrer valg av attributter</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">[</span><span class="n">layer_name_text</span><span class="p">]</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">attribute</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">()</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getLineEditText</span><span class="p">())</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">[</span><span class="n">layer_name_text</span><span class="p">]</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylker</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylker</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">()</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()),</span> <span class="kc">None</span><span class="p">)</span> <span class="c1">#lagerer valg og fylter og komuner</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">[</span><span class="n">layer_name_text</span><span class="p">]</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kommuner</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kommuner</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">()</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()),</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">comboBox_search_history</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span><span class="n">layer_name_text</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="c1">#Legger til ikke existerende søk i søk historien</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">comboBox_search_history</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">layer_name_text</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1">#lukker hovedvindu for enklere se resultater</span>
                
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span><span class="s2">&quot;Søket fullførte uten at noen objecter ble funnet&quot;</span><span class="p">,</span> <span class="s2">&quot;ingen Objecter funnet&quot;</span><span class="p">,</span> <span class="n">msg_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg_details</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg_type</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="c1">#Melding som vises om søket feilet</span>
        
        <span class="k">if</span> <span class="n">sok_metode</span> <span class="o">==</span> <span class="s2">&quot;memory&quot;</span><span class="p">:</span> <span class="c1">#self.dlg.comboBox_sok_metode.currentText() == &quot;memory&quot;:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">removeMapLayer</span><span class="p">(</span> <span class="n">tempLayer</span> <span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">RuntimeError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">UnboundLocalError</span><span class="p">):</span>
                <span class="k">pass</span>

            <span class="n">layer_name_text</span> <span class="o">=</span> <span class="n">layer_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="c1"># + &quot;Memory&quot;</span>

            <span class="k">if</span> <span class="n">search_type</span> <span class="o">==</span> <span class="s2">&quot;Vei&quot;</span><span class="p">:</span>
                <span class="n">tempLayer</span> <span class="o">=</span> <span class="n">QgsVectorLayer</span><span class="p">(</span><span class="s2">&quot;LineString?crs=epsg:4326&quot;</span><span class="p">,</span> <span class="n">layer_name_text</span><span class="p">,</span> <span class="s2">&quot;memory&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">search_type</span> <span class="o">==</span> <span class="n">search_type_pomrade</span><span class="p">:</span>
                <span class="n">tempLayer</span> <span class="o">=</span> <span class="n">QgsVectorLayer</span><span class="p">(</span><span class="s2">&quot;Polygon?crs=epsg:4326&quot;</span><span class="p">,</span> <span class="n">layer_name_text</span><span class="p">,</span> <span class="s2">&quot;memory&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tempLayer</span> <span class="o">=</span> <span class="n">QgsVectorLayer</span><span class="p">(</span><span class="s2">&quot;Point?crs=epsg:4326&quot;</span><span class="p">,</span> <span class="n">layer_name_text</span><span class="p">,</span> <span class="s2">&quot;memory&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">expr_string</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1">#tester en liten ting med gitKrakken</span>
                <span class="c1">#expr_string = &quot; \&quot;kommune\&quot; &gt; 0&quot;</span>
                <span class="n">temp_data</span> <span class="o">=</span> <span class="n">mem_layer</span><span class="o">.</span><span class="n">dataProvider</span><span class="p">()</span>
                <span class="n">attr</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">dataProvider</span><span class="p">()</span><span class="o">.</span><span class="n">fields</span><span class="p">()</span><span class="o">.</span><span class="n">toList</span><span class="p">()</span>
                <span class="n">temp_data</span><span class="o">.</span><span class="n">addAttributes</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="n">tempLayer</span><span class="o">.</span><span class="n">updateFields</span><span class="p">()</span>
                <span class="n">temp_data</span><span class="o">.</span><span class="n">addFeatures</span><span class="p">(</span><span class="n">feats</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">expr</span> <span class="o">=</span> <span class="n">QgsExpression</span><span class="p">(</span><span class="n">expr_string</span><span class="p">)</span>
                <span class="n">it</span> <span class="o">=</span> <span class="n">baselayer</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">(</span> <span class="n">QgsFeatureRequest</span><span class="p">(</span> <span class="n">expr</span> <span class="p">)</span> <span class="p">)</span>
                <span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">id</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">it</span><span class="p">]</span>
                <span class="n">baselayer</span><span class="o">.</span><span class="n">setSelectedFeatures</span><span class="p">(</span> <span class="n">ids</span> <span class="p">)</span>
                <span class="n">selectedFeatures</span> <span class="o">=</span> <span class="n">baselayer</span><span class="o">.</span><span class="n">selectedFeatures</span><span class="p">()</span>
                <span class="n">temp_data</span> <span class="o">=</span> <span class="n">tempLayer</span><span class="o">.</span><span class="n">dataProvider</span><span class="p">()</span>
                <span class="n">attr</span> <span class="o">=</span> <span class="n">baselayer</span><span class="o">.</span><span class="n">dataProvider</span><span class="p">()</span><span class="o">.</span><span class="n">fields</span><span class="p">()</span><span class="o">.</span><span class="n">toList</span><span class="p">()</span>
                <span class="n">temp_data</span><span class="o">.</span><span class="n">addAttributes</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="n">tempLayer</span><span class="o">.</span><span class="n">updateFields</span><span class="p">()</span>
                <span class="n">temp_data</span><span class="o">.</span><span class="n">addFeatures</span><span class="p">(</span><span class="n">selectedFeatures</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">tempLayer</span><span class="o">.</span><span class="n">featureCount</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">existing_layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">legendInterface</span><span class="p">()</span><span class="o">.</span><span class="n">layers</span><span class="p">()</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">existing_layers</span><span class="p">:</span> <span class="c1">#Removing layers with same name</span>
                        <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">==</span> <span class="n">tempLayer</span><span class="o">.</span><span class="n">name</span><span class="p">():</span>
                            <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">removeMapLayers</span><span class="p">(</span> <span class="p">[</span><span class="n">layer</span><span class="o">.</span><span class="n">id</span><span class="p">()]</span> <span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span> <span class="o">=</span> <span class="n">tempLayer</span>
                <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="p">)</span>

                <span class="c1">#self.canvas.setExtent(self.current_search_layer.extent())</span>
                <span class="c1">#self.canvas.refresh()</span>
                <span class="c1">#tempLayer.triggerRepaint()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addDockWidget</span><span class="p">(</span> <span class="n">Qt</span><span class="o">.</span><span class="n">LeftDockWidgetArea</span> <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span> <span class="p">)</span>
                <span class="c1">#self.sourceMapTool.setLayer(self.current_search_layer)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fill_infoWidget</span><span class="p">(</span><span class="n">attributes</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">[</span><span class="n">layer_name_text</span><span class="p">]</span> <span class="o">=</span> <span class="n">SavedSearch</span><span class="p">(</span><span class="n">layer_name_text</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="p">,</span> <span class="n">layer_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">())</span> <span class="c1">#lagerer søkets tab indes, lagnavn og lag referanse</span>
                <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span> <span class="c1">#lagrer valg av attributter</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">[</span><span class="n">layer_name_text</span><span class="p">]</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">attribute</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">()</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getLineEditText</span><span class="p">())</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">[</span><span class="n">layer_name_text</span><span class="p">]</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylker</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylker</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">()</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()),</span> <span class="kc">None</span><span class="p">)</span> <span class="c1">#lagerer valg og fylter og komuner</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">[</span><span class="n">layer_name_text</span><span class="p">]</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kommuner</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kommuner</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">()</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()),</span> <span class="kc">None</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1">#closing main window for easyer visualisation of results</span>

            <span class="k">else</span><span class="p">:</span> <span class="c1">#no objects found</span>
                <span class="c1">#msg.done(1)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span><span class="s2">&quot;Søket fullførte uten at noen objecter ble funnet&quot;</span><span class="p">,</span> <span class="s2">&quot;ingen Objecter funnet&quot;</span><span class="p">,</span> <span class="n">msg_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg_details</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg_type</span><span class="o">=</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Information</span><span class="p">)</span>
                <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">removeMapLayer</span><span class="p">(</span> <span class="n">tempLayer</span><span class="o">.</span><span class="n">id</span><span class="p">()</span> <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">selectionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selectedObjects</span><span class="p">)</span> <span class="c1">#Filling infoWidget when objects are selected</span>
                <span class="n">mapCanvas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mapCanvas</span><span class="p">()</span>
                <span class="n">mapCanvas</span><span class="o">.</span><span class="n">setExtent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">extent</span><span class="p">())</span>
                <span class="n">mapCanvas</span><span class="o">.</span><span class="n">zoomOut</span><span class="p">()</span>
                <span class="c1">#self.canvas.setExtent(self.current_search_layer.extent())</span>
                <span class="c1">#self.canvas.refresh()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="c1">#raise e</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="c1">#removing previus single highlight</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">scene</span><span class="p">()</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">label_typeSok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()))</span>
        <span class="c1">#msg.done(1)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Filtering End&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tilgjengelighet.selectedObjects"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.selectedObjects">[docs]</a>    <span class="k">def</span> <span class="nf">selectedObjects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selFeatures</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;changing number of selected objects in infowidget and settning current selected object</span>
<span class="sd">        :param selFeatures: Selected features of layer</span>
<span class="sd">         &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selFeatures</span> <span class="o">=</span> <span class="n">selFeatures</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">selFeatures</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">selFeatures</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number_of_objects</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">selFeatures</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">label_object_number</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">/</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_objects</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_info</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">highlightSelected</span><span class="p">()</span></div>


<div class="viewcode-block" id="Tilgjengelighet.highlightSelected"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.highlightSelected">[docs]</a>    <span class="k">def</span> <span class="nf">highlightSelected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Highlights the object viewed in infowidget&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">scene</span><span class="p">()</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span><span class="p">)</span>

        <span class="n">selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">activeLayer</span><span class="p">()</span><span class="o">.</span><span class="n">selectedFeatures</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span> <span class="o">=</span> <span class="n">QgsRubberBand</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span><span class="n">QGis</span><span class="o">.</span><span class="n">Polygon</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span><span class="o">.</span><span class="n">setBorderColor</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span><span class="o">.</span><span class="n">setFillColor</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
            <span class="c1">#self.rubberHighlight.setLineStyle(Qt.PenStyle(Qt.DotLine))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span><span class="o">.</span><span class="n">setToGeometry</span><span class="p">(</span><span class="n">selection</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span><span class="p">]</span><span class="o">.</span><span class="n">geometry</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

<div class="viewcode-block" id="Tilgjengelighet.infoWidget_next"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.infoWidget_next">[docs]</a>    <span class="k">def</span> <span class="nf">infoWidget_next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;shows next object in infoWidget&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span><span class="o">+=</span><span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_objects</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_info</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">highlightSelected</span><span class="p">()</span></div>

<div class="viewcode-block" id="Tilgjengelighet.infoWidget_prev"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.infoWidget_prev">[docs]</a>    <span class="k">def</span> <span class="nf">infoWidget_prev</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;shows previus object in infoWidget&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span><span class="o">-=</span><span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_objects</span><span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_info</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">highlightSelected</span><span class="p">()</span></div>


<div class="viewcode-block" id="Tilgjengelighet.obj_info"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.obj_info">[docs]</a>    <span class="k">def</span> <span class="nf">obj_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fills infowidget with info of current object&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">label_object_number</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">/</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_objects</span><span class="p">))</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">selectedFeatures</span><span class="p">()</span>
        <span class="c1">#for feature in selection: #For availebility icon, not currently working</span>
            <span class="c1">#self.set_availebility_icon(feature)</span>
            <span class="c1">#self.set_availebility_icon(feature, &quot;tilgjengvurderingRullestol&quot;, self.icon_rullestol, [self.image_tilgjengelig, self.image_vanskeligTilgjengelig, self.image_ikkeTilgjengelig, self.image_ikkeVurdert], self.infoWidget.pushButton_rullestol)</span>
            <span class="c1">#self.set_availebility_icon(feature, &quot;tilgjengvurderingElRull&quot;, self.icon_rullestol_el, [self.image_tilgjengelig_el, self.image_vanskeligTilgjengelig_el, self.image_ikkeTilgjengelig_el, self.image_ikkeVurdert_el], self.infoWidget.pushButton_elrullestol)</span>
            <span class="c1">#self.set_availebility_icon(feature, &quot;tilgjengvurderingSyn&quot;, self.icon_syn, [self.image_tilgjengelig_syn, self.image_vanskeligTilgjengelig_syn, self.image_ikkeTilgjengelig_syn, self.image_ikkeVurdert_syn], self.infoWidget.pushButton_syn)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span><span class="p">)):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">selection</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">())]</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;value: &quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="s2">&quot;type: &quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">long</span><span class="p">)):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="n">QPyNullVariant</span><span class="p">)):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">())</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

                <span class="c1">####Iconer i Infowidget, ikke fått til å fungere#####</span>
                <span class="c1"># for j in range(0, 9, 4):#len(self.icons)):</span>
                <span class="c1">#     print(&quot;j: &quot;, j)</span>
                <span class="c1">#     gridLayout = self.infoWidget.gridLayout</span>
                <span class="c1">#     #img_layout = self.infoWidget.gridLayout.itemAtPosition(i, j+2).widget()</span>
                <span class="c1">#     tilgjenglighetsvurdering = self.tilgjengelighetsvurdering(value, self.current_attributes[i].notAcceceble, self.current_attributes[i].acceceble, self.current_attributes[i].relate_notAccec, self.current_attributes[i].relate_accec)</span>
                <span class="c1">#     #icon_size = self.infoWidget.gridLayout.itemAtPosition(i, j+2).widget().iconSize()</span>
                <span class="c1">#     print(&quot;tilgjenglighetsvurdering: &quot;, tilgjenglighetsvurdering)</span>

                <span class="c1">#     #print(&quot;icon: &quot;, self.icons[j][tilgjenglighetsvurdering], &quot; type: &quot;, type(self.icons[j][tilgjenglighetsvurdering]))</span>
                <span class="c1">#     if tilgjenglighetsvurdering == &quot;tilgjengelig&quot;:</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+2).widget().setVisible(False)</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+4).widget().setVisible(False)</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+5).widget().setVisible(False)</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+3).widget().setVisible(True)</span>
                <span class="c1">#     elif tilgjenglighetsvurdering == &quot;vanskeligTilgjengelig&quot;:</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+2).widget().setVisible(False)</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+4).widget().setVisible(True)</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+5).widget().setVisible(False)</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+3).widget().setVisible(False)</span>
                <span class="c1">#     elif tilgjenglighetsvurdering == &quot;ikkeTilgjengelig&quot;:</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+2).widget().setVisible(False)</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+4).widget().setVisible(False)</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+5).widget().setVisible(True)</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+3).widget().setVisible(False)</span>
                <span class="c1">#     elif tilgjenglighetsvurdering == &quot;ikkeVurdert&quot;:</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+2).widget().setVisible(True)</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+4).widget().setVisible(False)</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+5).widget().setVisible(False)</span>
                <span class="c1">#         gridLayout.itemAtPosition(i,j+3).widget().setVisible(False)</span>

                        <span class="c1">#img_layout.setVisible(False)</span>
                    <span class="c1">#img_layout.setPixmap(self.icons[j][tilgjenglighetsvurdering])</span>
                    <span class="c1">#img_layout.setIconSize(icon_size)</span>
                    <span class="c1">#img_layout.setFixedSize(icon_size)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span></div>
                    
    
    <span class="k">def</span> <span class="nf">tilgjengelighetsvurdering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">notAcceceble</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">acceceble</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relate_notAccec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">relate_acces</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1">#[&quot;tilgjengelig&quot;, &quot;ikkeTilgjengelig&quot;, &quot;vanskeligTilgjengelig&quot;, &quot;ikkeVurdert&quot;]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_float</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_int</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            
        <span class="c1">#print(&quot;Vurederer Tilgjenglighet&quot;)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;-&quot;</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">QPyNullVariant</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ikkeVurdert&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;ikkeVurdert&quot;</span>
        <span class="k">elif</span> <span class="n">notAcceceble</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">relate_notAccec</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">notAcceceble</span><span class="p">):</span>
                <span class="c1">#print(&quot;ikkeTilgjengelig&quot;)</span>
                <span class="k">return</span> <span class="s2">&quot;ikkeTilgjengelig&quot;</span>
        <span class="k">elif</span> <span class="n">acceceble</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">relate_acces</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">acceceble</span><span class="p">):</span>
                <span class="c1">#print(&quot;Tilgjengelig&quot;)</span>
                <span class="k">return</span> <span class="s2">&quot;tilgjengelig&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#print(&quot;vanskeligTilgjengelig&quot;)</span>
            <span class="k">return</span> <span class="s2">&quot;vanskeligTilgjengelig&quot;</span>
        <span class="c1">#print(&quot;I should not see this&quot;)</span>
        <span class="k">return</span> <span class="s2">&quot;ikkeVurdert&quot;</span>

    <span class="k">def</span> <span class="nf">is_float</span><span class="p">(</span><span class="n">slef</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">is_int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>


<div class="viewcode-block" id="Tilgjengelighet.show_message"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.show_message">[docs]</a>    <span class="k">def</span> <span class="nf">show_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_text</span><span class="p">,</span> <span class="n">msg_title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg_details</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Show the user a message</span>
<span class="sd">        :param msg_test: the tekst to show the user</span>
<span class="sd">        :type msg_tekt: str</span>

<span class="sd">        :param msg_title: the title of the message box</span>
<span class="sd">        :type msg_title: str</span>

<span class="sd">        :param msg_info: additional info for the user</span>
<span class="sd">        :type msg_info: str</span>

<span class="sd">        :param msg_details: details for the user</span>
<span class="sd">        :type msg_details: str</span>

<span class="sd">        :param msg_type: the type of message</span>
<span class="sd">        :type msg_type: QMessageBox.Icon</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
        
        <span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="n">msg_text</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">msg_title</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">msg_title</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">msg_info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span><span class="n">msg_info</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">msg_details</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">setDetailedText</span><span class="p">(</span><span class="n">msg_details</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">msg_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">msg_type</span><span class="p">)</span>

        <span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>

        <span class="c1">#msg.buttonClicked.connect()</span>

        <span class="n">retval</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">((</span><span class="s2">&quot;value of pressed message box button:&quot;</span><span class="p">,</span> <span class="n">retval</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tilgjengelighet.excelSave"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.excelSave">[docs]</a>    <span class="k">def</span> <span class="nf">excelSave</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;obtaind from xytools, Saves features to excel format</span>
<span class="sd">        @author: Richard Duivenvoorde</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> 
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span> <span class="s2">&quot;Finner ingen lag å eksportere&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">activeLayer</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">currentLayerChanged</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">activeLayer</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>   
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span> <span class="s2">&quot;No active layer&quot;</span><span class="p">,</span> <span class="s2">&quot;Please make an vector layer active before saving it to excel file.&quot;</span><span class="p">)</span>
                <span class="k">return</span>

        <span class="n">fieldNames</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">fieldNames</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="p">)</span>
        <span class="n">dlg</span> <span class="o">=</span> <span class="n">FieldChooserDialog</span><span class="p">(</span><span class="n">fieldNames</span><span class="p">)</span>

        <span class="n">names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">dlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">names</span> <span class="o">=</span> <span class="n">dlg</span><span class="o">.</span><span class="n">getSelectedFields</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span> <span class="s2">&quot;No fields selected&quot;</span><span class="p">,</span> <span class="s2">&quot;Please select at least one field.&quot;</span><span class="p">)</span>

        <span class="n">dirPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;/xytools/excelSavePath&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>    
        <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">filter</span><span class="p">)</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileNameAndFilter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span>
                    <span class="s2">&quot;Please save excel file as...&quot;</span><span class="p">,</span>
                    <span class="n">dirPath</span><span class="p">,</span>
                    <span class="s2">&quot;Excel files (*.xls)&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Filter list for selecting files from a dialog box&quot;</span><span class="p">)</span>
        <span class="n">fn</span><span class="p">,</span> <span class="n">fileExtension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">unicode</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># user choose cancel</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s2">&quot;/xytools/excelSavePath&quot;</span><span class="p">,</span> <span class="n">QFileInfo</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">absolutePath</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">fileExtension</span> <span class="o">!=</span> <span class="s1">&#39;.xls&#39;</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span> <span class="o">+</span> <span class="s1">&#39;.xls&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">providers</span> <span class="k">import</span> <span class="n">excel</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span> <span class="s2">&quot;Unable to load Python module&quot;</span><span class="p">,</span> <span class="s2">&quot;There is a problem with loading a python module which is needed to read/write Excel files. Please see documentation/help how to install python xlw and xlrd libraries.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">xlw</span> <span class="o">=</span> <span class="n">excel</span><span class="o">.</span><span class="n">Writer</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="c1">#self.layer = self.iface.activeLayer()</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">selectedFeatureCount</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span> 
                <span class="s2">&quot;Eksporter Til Excel&quot;</span><span class="p">,</span> 
                <span class="p">(</span><span class="s2">&quot;You have a selection in this layer. Only export this selection?</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="s2">&quot;Click Yes to export selection only, click No to export all rows.&quot;</span><span class="p">),</span> 
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">,</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">)</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
                    <span class="n">selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">selectedFeaturesIds</span><span class="p">()</span>
        <span class="n">feature</span> <span class="o">=</span> <span class="n">QgsFeature</span><span class="p">();</span>

        <span class="n">xlw</span><span class="o">.</span><span class="n">writeAttributeRow</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>

        <span class="n">rowNr</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">QGis</span><span class="o">.</span><span class="n">QGIS_VERSION_INT</span> <span class="o">&lt;</span> <span class="mi">10900</span><span class="p">:</span>
            <span class="n">prov</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">dataProvider</span><span class="p">()</span>
            <span class="n">prov</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">prov</span><span class="o">.</span><span class="n">attributeIndexes</span><span class="p">())</span>
            <span class="k">while</span> <span class="n">prov</span><span class="o">.</span><span class="n">nextFeature</span><span class="p">(</span><span class="n">feature</span><span class="p">):</span>
                <span class="c1"># attribute values, either for all or only for selection</span>
                <span class="k">if</span> <span class="n">selection</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">feature</span><span class="o">.</span><span class="n">id</span><span class="p">()</span> <span class="ow">in</span> <span class="n">selection</span><span class="p">:</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">attributeMap</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                    <span class="n">rowValues</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
                        <span class="n">rowValues</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">field</span><span class="p">])</span>
                    <span class="n">xlw</span><span class="o">.</span><span class="n">writeAttributeRow</span><span class="p">(</span><span class="n">rowNr</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
                    <span class="n">rowNr</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prov</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">()</span>
            <span class="k">while</span> <span class="n">prov</span><span class="o">.</span><span class="n">nextFeature</span><span class="p">(</span><span class="n">feature</span><span class="p">):</span>
                <span class="c1"># attribute values, either for all or only for selection</span>
                <span class="k">if</span> <span class="n">selection</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">feature</span><span class="o">.</span><span class="n">id</span><span class="p">()</span> <span class="ow">in</span> <span class="n">selection</span><span class="p">:</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
                        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="o">.</span><span class="n">attribute</span><span class="p">(</span><span class="n">field</span><span class="p">))</span>
                    <span class="n">xlw</span><span class="o">.</span><span class="n">writeAttributeRow</span><span class="p">(</span><span class="n">rowNr</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
                    <span class="n">rowNr</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">xlw</span><span class="o">.</span><span class="n">saveFile</span><span class="p">()</span>
        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Successfully saved as xls file&quot;</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">savePath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">saveType</span><span class="p">,</span> <span class="n">saveExtension</span><span class="p">):</span> <span class="c1">#sett inn denne for exel også</span>
        <span class="n">dirPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;/Tilgjengelighet/savePath&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>    
        <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">filter</span><span class="p">)</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileNameAndFilter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span>
                    <span class="s2">&quot;Please save </span><span class="si">{0}</span><span class="s2"> file as...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">saveType</span><span class="p">),</span>
                    <span class="n">dirPath</span><span class="p">,</span>
                    <span class="s2">&quot;Image files (*</span><span class="si">{0}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">saveExtension</span><span class="p">),</span>
                    <span class="s2">&quot;Filter list for selecting files from a dialog box&quot;</span><span class="p">)</span>
        <span class="n">fn</span><span class="p">,</span> <span class="n">fileExtension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">unicode</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># user choose cancel</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s2">&quot;/Tilgjengelighet/savePath&quot;</span><span class="p">,</span> <span class="n">QFileInfo</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">absolutePath</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">fileExtension</span> <span class="o">!=</span> <span class="n">saveExtension</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span> <span class="o">+</span> <span class="n">saveExtension</span>

        <span class="k">return</span> <span class="n">dirPath</span><span class="p">,</span> <span class="n">filename</span>


    <span class="k">def</span> <span class="nf">imageSave</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#filename1 = QFileDialog.getSaveFileName()</span>
        <span class="c1">#print(filename1)</span>

        <span class="c1"># dirPath = self.settings.value(&quot;/Tilgjengelighet/savePath&quot;, &quot;.&quot;, type=str)    </span>
        <span class="c1"># (filename, filter) = QFileDialog.getSaveFileNameAndFilter(self.iface.mainWindow(),</span>
        <span class="c1">#             &quot;Please save image file as...&quot;,</span>
        <span class="c1">#             dirPath,</span>
        <span class="c1">#             &quot;Image files (*.png)&quot;,</span>
        <span class="c1">#             &quot;Filter list for selecting files from a dialog box&quot;)</span>
        <span class="c1"># fn, fileExtension = os.path.splitext(unicode(filename))</span>
        <span class="c1"># if len(fn) == 0: # user choose cancel</span>
        <span class="c1">#     return</span>
        <span class="c1"># self.settings.setValue(&quot;/Tilgjengelighet/savePath&quot;, QFileInfo(filename).absolutePath())</span>
        <span class="c1"># if fileExtension != &#39;.png&#39;:</span>
        <span class="c1">#     filename = filename + &#39;.png&#39;</span>

        <span class="n">dirPath</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">savePath</span><span class="p">(</span><span class="s2">&quot;Image&quot;</span><span class="p">,</span> <span class="s2">&quot;.png&quot;</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;path: &quot;</span> <span class="o">+</span> <span class="n">dirPath</span> <span class="o">+</span> <span class="s2">&quot; name: &quot;</span> <span class="o">+</span> <span class="n">filename</span><span class="p">)</span>
        <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">QImage</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">QImage</span><span class="o">.</span><span class="n">Format_RGB32</span><span class="p">)</span>

        <span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mapSettings</span><span class="p">()</span>

        <span class="c1"># You can fine tune the settings here for different</span>
        <span class="c1"># dpi, extent, antialiasing...</span>
        <span class="c1"># Just make sure the size of the target image matches</span>

        <span class="c1"># You can also add additional layers. In the case here,</span>
        <span class="c1"># this helps to add layers that haven&#39;t been added to the</span>
        <span class="c1"># canvas yet</span>
        <span class="c1">#layers = settings.layers()</span>
        <span class="c1">#settings.setLayers([layerP.id(), layerL.id()] + layers)</span>

        <span class="n">job</span> <span class="o">=</span> <span class="n">QgsMapRendererCustomPainterJob</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">painter</span><span class="p">)</span>
        <span class="n">job</span><span class="o">.</span><span class="n">renderSynchronously</span><span class="p">()</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
        <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="c1">#filename1 + &quot;.png&quot;)#&#39;C:\\Users\\kaspa_000\\OneDrive\\Documents\\Skole-KaspArno\\Master\\tests\\newimageTest3.png&#39;)</span>


<div class="viewcode-block" id="Tilgjengelighet.open_export_layer_dialog"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.open_export_layer_dialog">[docs]</a>    <span class="k">def</span> <span class="nf">open_export_layer_dialog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1">#Not currently in use</span>
        <span class="sd">&quot;&quot;&quot;opens the excport gui&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

<div class="viewcode-block" id="Tilgjengelighet.OpenBrowser"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.OpenBrowser">[docs]</a>    <span class="k">def</span> <span class="nf">OpenBrowser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1">#Not currently in use</span>
        <span class="sd">&quot;&quot;&quot;Opens broeser to save file&quot;&quot;&quot;</span>
        <span class="n">filename1</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">filename1</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tilgjengelighet.lagre_lag"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.lagre_lag">[docs]</a>    <span class="k">def</span> <span class="nf">lagre_lag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1">#Not currently in use</span>
        <span class="sd">&quot;&quot;&quot;Saves layer as exported&quot;&quot;&quot;</span>
        <span class="n">QgsVectorFileWriter</span><span class="o">.</span><span class="n">writeAsVectorFormat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">activeLayer</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span></div>


<div class="viewcode-block" id="Tilgjengelighet.reset"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="sd">&quot;&quot;&quot;Resets the gui back to default&quot;&quot;&quot;</span>
        <span class="n">comboBoxes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_komuner</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_avstand_hc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_ank_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_byggningstype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rampe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dortype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dorbredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_terskel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kontrast</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_bredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_handliste</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_hand1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_hand2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_manuell_rullestol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_el_rullestol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_syn</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">cmb</span> <span class="ow">in</span> <span class="n">comboBoxes</span><span class="p">:</span>
            <span class="n">cmb</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">lineEdits</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_avstand_hc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_ank_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_dorbredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_terskel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_rmp_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_rmp_bredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_hand1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_hand2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_navn_paa_sok</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">le</span> <span class="ow">in</span> <span class="n">lineEdits</span><span class="p">:</span>
            <span class="n">le</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span></div>

  



<div class="viewcode-block" id="Tilgjengelighet.run"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.run">[docs]</a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#reloadPlugin(&#39;Tilgjengelighet&#39;)</span>
        <span class="sd">&quot;&quot;&quot;Run method that performs all the real work&quot;&quot;&quot;</span>


        <span class="c1"># show the dialog</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="c1">#self.featuretype = FeatureType()</span>
        <span class="c1">#if self.featuretype:</span>
        <span class="c1">#    self.getFeatures()</span>
        

        <span class="c1"># Run the dialog event loop</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="c1"># See if OK was pressed</span>
        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
            <span class="c1"># Do something useful here - delete the line containing pass and</span>
            <span class="c1"># substitute with your code.</span>
            <span class="k">pass</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Kasper Skjeggestad.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>