
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Tilgjengelighet &#8212; Tilgjengelig For Alle 0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for Tilgjengelighet</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">/***************************************************************************</span>
<span class="sd"> Tilgjengelighet</span>
<span class="sd">                                 A QGIS plugin</span>
<span class="sd"> My Tilgjengelighet assignment</span>
<span class="sd">                              -------------------</span>
<span class="sd">        begin                : 2017-08-21</span>
<span class="sd">        git sha              : $Format:%H$</span>
<span class="sd">        copyright            : (C) 2017 by Kasper Skjeggestad</span>
<span class="sd">        email                : kasper.skjeggestad@gmail.com</span>
<span class="sd"> ***************************************************************************/</span>

<span class="sd">/***************************************************************************</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> *   This program is free software; you can redistribute it and/or modify  *</span>
<span class="sd"> *   it under the terms of the GNU General Public License as published by  *</span>
<span class="sd"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<span class="sd"> *   (at your option) any later version.                                   *</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> ***************************************************************************/</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">io</span>

<span class="kn">import</span> <span class="nn">urllib</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">import</span> <span class="nn">string</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">operator</span>
<span class="kn">import</span> <span class="nn">codecs</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="kn">from</span> <span class="nn">qgis.core</span> <span class="k">import</span> <span class="o">*</span> <span class="c1">#QgsDataSourceURI, QgsMapLayerRegistry, QgsVectorLayer, QgsExpression, QgsFeatureRequest, QgsVectorFileWriter, QgsLayerTreeLayer, QgsLayerTreeGroup, QgsMapLayer, QgsProject, QgsFeature, QGis</span>
<span class="kn">from</span> <span class="nn">PyQt4.QtCore</span> <span class="k">import</span> <span class="o">*</span> <span class="c1">#QSettings, QTranslator, qVersion, QCoreApplication, QPyNullVariant, QDateTime, QThread, pyqtSignal, Qt, QRect, QSize, QFileInfo</span>
<span class="kn">from</span> <span class="nn">PyQt4.QtGui</span> <span class="k">import</span> <span class="o">*</span> <span class="c1">#QAction, QIcon, QDockWidget, QGridLayout, QLineEdit, QTableWidget, QTableWidgetItem, QMessageBox, QApplication, QHBoxLayout, QVBoxLayout, QAbstractItemView, QListWidgetItem, QAbstractItemView, QFileDialog, QLabel, QPixmap, QIcon</span>
<span class="kn">from</span> <span class="nn">PyQt4.QtNetwork</span> <span class="k">import</span> <span class="n">QHttp</span>
<span class="kn">from</span> <span class="nn">qgis.gui</span> <span class="k">import</span> <span class="n">QgsRubberBand</span><span class="p">,</span> <span class="n">QgsMessageBar</span>
<span class="kn">from</span> <span class="nn">osgeo</span> <span class="k">import</span> <span class="n">gdal</span>
<span class="kn">from</span> <span class="nn">osgeo</span> <span class="k">import</span> <span class="n">ogr</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="k">import</span> <span class="n">partial</span>


<span class="c1"># Initialize Qt resources from file resources.py</span>
<span class="kn">import</span> <span class="nn">resources_rc</span>

<span class="c1"># Import the code for the dialog</span>
<span class="kn">from</span> <span class="nn">Tilgjengelighet_dialog</span> <span class="k">import</span> <span class="n">TilgjengelighetDialog</span>
<span class="kn">from</span> <span class="nn">tabledialog</span> <span class="k">import</span> <span class="n">TableDialog</span>
<span class="kn">from</span> <span class="nn">infoWidgetDialog</span> <span class="k">import</span> <span class="n">infoWidgetDialog</span>

<span class="kn">from</span> <span class="nn">AttributeForm</span> <span class="k">import</span> <span class="n">AttributeForm</span> <span class="c1">#Storing user made attribute information</span>
<span class="kn">from</span> <span class="nn">SavedSearch</span> <span class="k">import</span> <span class="n">SavedSearch</span> <span class="c1">#Save search choises for later use</span>

<span class="c1">#from xytools</span>
<span class="kn">from</span> <span class="nn">xytools.field_chooser</span> <span class="k">import</span> <span class="n">FieldChooserDialog</span>
<span class="kn">from</span> <span class="nn">xytools.exportlayerdialog</span> <span class="k">import</span> <span class="n">exportLayerDialog</span>
<span class="kn">from</span> <span class="nn">xytools</span> <span class="k">import</span> <span class="n">utils</span>

<span class="c1">#from OpenLayers plugin</span>
<span class="kn">from</span> <span class="nn">openlayers_plugin.openlayers_layer</span> <span class="k">import</span> <span class="n">OpenlayersLayer</span>
<span class="kn">from</span> <span class="nn">openlayers_plugin.weblayers.weblayer_registry</span> <span class="k">import</span> <span class="n">WebLayerTypeRegistry</span>
<span class="kn">from</span> <span class="nn">openlayers_plugin.weblayers.weblayer_registry</span> <span class="k">import</span> <span class="n">WebLayerTypeRegistry</span>
<span class="kn">from</span> <span class="nn">openlayers_plugin.weblayers.google_maps</span> <span class="k">import</span> <span class="n">OlGooglePhysicalLayer</span><span class="p">,</span> <span class="n">OlGoogleStreetsLayer</span><span class="p">,</span> <span class="n">OlGoogleHybridLayer</span><span class="p">,</span> <span class="n">OlGoogleSatelliteLayer</span>
<span class="kn">from</span> <span class="nn">openlayers_plugin.weblayers.osm</span> <span class="k">import</span> <span class="n">OlOpenStreetMapLayer</span><span class="p">,</span> <span class="n">OlOSMHumanitarianDataModelLayer</span>
<span class="kn">from</span> <span class="nn">openlayers_plugin.weblayers.osm_thunderforest</span> <span class="k">import</span> <span class="n">OlOpenCycleMapLayer</span><span class="p">,</span> <span class="n">OlOCMLandscapeLayer</span><span class="p">,</span> <span class="n">OlOCMPublicTransportLayer</span><span class="p">,</span> <span class="n">OlOCMOutdoorstLayer</span><span class="p">,</span> <span class="n">OlOCMTransportDarkLayer</span><span class="p">,</span> <span class="n">OlOCMSpinalMapLayer</span><span class="p">,</span> <span class="n">OlOCMPioneerLayer</span><span class="p">,</span> <span class="n">OlOCMMobileAtlasLayer</span><span class="p">,</span> <span class="n">OlOCMNeighbourhoodLayer</span>
<span class="kn">from</span> <span class="nn">openlayers_plugin.weblayers.bing_maps</span> <span class="k">import</span> <span class="n">OlBingRoadLayer</span><span class="p">,</span> <span class="n">OlBingAerialLayer</span><span class="p">,</span> <span class="n">OlBingAerialLabelledLayer</span>
<span class="kn">from</span> <span class="nn">openlayers_plugin.weblayers.apple_maps</span> <span class="k">import</span> <span class="n">OlAppleiPhotoMapLayer</span>
<span class="kn">from</span> <span class="nn">openlayers_plugin.weblayers.osm_stamen</span> <span class="k">import</span> <span class="n">OlOSMStamenTonerLayer</span><span class="p">,</span> <span class="n">OlOSMStamenTonerLiteLayer</span><span class="p">,</span> <span class="n">OlOSMStamenWatercolorLayer</span><span class="p">,</span> <span class="n">OlOSMStamenTerrainLayer</span>
<span class="kn">from</span> <span class="nn">openlayers_plugin.weblayers.wikimedia_maps</span> <span class="k">import</span> <span class="n">WikimediaLabelledLayer</span><span class="p">,</span> <span class="n">WikimediaUnLabelledLayer</span>


<div class="viewcode-block" id="Tilgjengelighet"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet">[docs]</a><span class="k">class</span> <span class="nc">Tilgjengelighet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;QGIS Plugin Implementation.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iface</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">        :param iface: An interface instance that will be passed to this class</span>
<span class="sd">            which provides the hook by which you can manipulate the QGIS</span>
<span class="sd">            application at run time.</span>
<span class="sd">        :type iface: QgsInterface</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># Save reference to the QGIS interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span> <span class="o">=</span> <span class="n">iface</span> <span class="c1">#Accsess to QGIS interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mapCanvas</span><span class="p">()</span> <span class="c1">#Access to QGIS canvas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">QSettings</span><span class="p">()</span> <span class="c1">#Access to QGIS settings</span>
        
        
        <span class="c1"># initialize locale</span>
        <span class="n">locale</span> <span class="o">=</span> <span class="n">QSettings</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39;locale/userLocale&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span> <span class="c1">#Plugin path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">locale_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span><span class="p">,</span>
            <span class="s1">&#39;i18n&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Tilgjengelighet_</span><span class="si">{}</span><span class="s1">.qm&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">locale</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">locale_path</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">translator</span> <span class="o">=</span> <span class="n">QTranslator</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">translator</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">locale_path</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">qVersion</span><span class="p">()</span> <span class="o">&gt;</span> <span class="s1">&#39;4.3.3&#39;</span><span class="p">:</span>
                <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">installTranslator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">translator</span><span class="p">)</span>


        <span class="c1"># Declare instance attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;&amp;Kartverket Tilgjengelighet&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addToolBar</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;Tilgjengelighet&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;Tilgjengelighet&#39;</span><span class="p">)</span>

        <span class="c1">#Settnings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s2">&quot;/Qgis/dockAttributeTable&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="c1">#Get attribute table at bottom of screen</span>

        <span class="c1">#Layer and attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1">#The last searched layer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1">#The attributes for current search layer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1">#history of all search</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1">#Marking the object currently visulised in infoWidget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unspecified</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;&quot;</span> <span class="c1">#unspecified attributes</span>

       <span class="c1">#Lists of feature types for tettested and friluft, key equeals name of tabs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">feature_type_tettsted</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sa">u</span><span class="s2">&quot;HC-Parkering&quot;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;TettstedHCparkering&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;Inngang&quot;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;TettstedInngangBygg&#39;</span><span class="p">,</span> 
            <span class="sa">u</span><span class="s1">&#39;Parkeringsomr</span><span class="se">\xe5</span><span class="s1">de&#39;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;TettstedParkeringsomr</span><span class="se">\xe5</span><span class="s1">de&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;Vei&quot;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;TettstedVei&#39;</span>
            <span class="p">}</span> <span class="c1">#use this to get featuretype based on current tab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">feature_type_friluft</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sa">u</span><span class="s1">&#39;Baderampe&#39;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;FriluftBaderampe&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;Fiskeplass&#39;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;FriluftFiskeplass&#39;</span><span class="p">,</span> 
            <span class="sa">u</span><span class="s1">&#39;Turvei&#39;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;FriluftTurvei&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;HC-Parkeringsplass&#39;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;FriluftHCparkering&#39;</span><span class="p">,</span> 
            <span class="sa">u</span><span class="s1">&#39;Parkeringsområde&#39;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;FriluftParkeringsområde&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;Friluftsområder&#39;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;FriluftFriluftsområde&#39;</span><span class="p">,</span>
            <span class="sa">u</span><span class="s1">&#39;Gapahuk&#39;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;FriluftGapahuk&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;Grill-/Bålplass&#39;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;FriluftGrillBålplass&#39;</span><span class="p">,</span>
            <span class="sa">u</span><span class="s1">&#39;Sittegruppe&#39;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;FriluftSittegruppe&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;Toalett&#39;</span> <span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;FriluftToalett&#39;</span><span class="p">}</span>

        <span class="c1">#Open Layers, background layers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span> <span class="o">=</span> <span class="n">WebLayerTypeRegistry</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ol_layers</span> <span class="o">=</span> <span class="p">[]</span>


    <span class="c1"># noinspection PyMethodMayBeStatic</span>
<div class="viewcode-block" id="Tilgjengelighet.tr"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.tr">[docs]</a>    <span class="k">def</span> <span class="nf">tr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the translation for a string using Qt translation API.</span>

<span class="sd">        We implement this ourselves since we do not inherit QObject.</span>

<span class="sd">        :param message: String for translation.</span>
<span class="sd">        :type message: str, QString</span>

<span class="sd">        :returns: Translated version of message.</span>
<span class="sd">        :rtype: QString</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># noinspection PyTypeChecker,PyArgumentList,PyCallByClass</span>
        <span class="k">return</span> <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s1">&#39;Tilgjengelighet&#39;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tilgjengelighet.add_action"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.add_action">[docs]</a>    <span class="k">def</span> <span class="nf">add_action</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">icon_path</span><span class="p">,</span>
        <span class="n">text</span><span class="p">,</span>
        <span class="n">callback</span><span class="p">,</span>
        <span class="n">enabled_flag</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">add_to_menu</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">add_to_toolbar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">status_tip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">whats_this</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a toolbar icon to the toolbar.</span>

<span class="sd">        :param icon_path: Path to the icon for this action. Can be a resource</span>
<span class="sd">            path (e.g. &#39;:/plugins/foo/bar.png&#39;) or a normal file system path.</span>
<span class="sd">        :type icon_path: str</span>

<span class="sd">        :param text: Text that should be shown in menu items for this action.</span>
<span class="sd">        :type text: str</span>

<span class="sd">        :param callback: Function to be called when the action is triggered.</span>
<span class="sd">        :type callback: function</span>

<span class="sd">        :param enabled_flag: A flag indicating if the action should be enabled</span>
<span class="sd">            by default. Defaults to True.</span>
<span class="sd">        :type enabled_flag: bool</span>

<span class="sd">        :param add_to_menu: Flag indicating whether the action should also</span>
<span class="sd">            be added to the menu. Defaults to True.</span>
<span class="sd">        :type add_to_menu: bool</span>

<span class="sd">        :param add_to_toolbar: Flag indicating whether the action should also</span>
<span class="sd">            be added to the toolbar. Defaults to True.</span>
<span class="sd">        :type add_to_toolbar: bool</span>

<span class="sd">        :param status_tip: Optional text to show in a popup when mouse pointer</span>
<span class="sd">            hovers over the action.</span>
<span class="sd">        :type status_tip: str</span>

<span class="sd">        :param parent: Parent widget for the new action. Defaults None.</span>
<span class="sd">        :type parent: QWidget</span>

<span class="sd">        :param whats_this: Optional text to show in the status bar when the</span>
<span class="sd">            mouse pointer hovers over the action.</span>

<span class="sd">        :returns: The action that was created. Note that the action is also</span>
<span class="sd">            added to self.actions list.</span>
<span class="sd">        :rtype: QAction</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Create the dialog (after translation) and keep reference</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span> <span class="o">=</span> <span class="n">TilgjengelighetDialog</span><span class="p">()</span> <span class="c1">#main dialig</span>

        <span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">icon_path</span><span class="p">)</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">enabled_flag</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">status_tip</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">action</span><span class="o">.</span><span class="n">setStatusTip</span><span class="p">(</span><span class="n">status_tip</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">whats_this</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">action</span><span class="o">.</span><span class="n">setWhatsThis</span><span class="p">(</span><span class="n">whats_this</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_to_toolbar</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_to_menu</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addPluginToMenu</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">menu</span><span class="p">,</span>
                <span class="n">action</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addPluginToWebMenu</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">menu</span><span class="p">,</span>
                <span class="n">action</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">action</span></div>

<div class="viewcode-block" id="Tilgjengelighet.initGui"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.initGui">[docs]</a>    <span class="k">def</span> <span class="nf">initGui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create the menu entries and toolbar icons inside the QGIS GUI.&quot;&quot;&quot;</span>

        <span class="n">icon_path</span> <span class="o">=</span> <span class="s1">&#39;:/plugins/Tilgjengelighet/icon.png&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span>
            <span class="n">icon_path</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;Kartverkets Tilgjengelighets database&#39;</span><span class="p">),</span>
            <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">,</span>
            <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>


        <span class="c1">### main window ###</span>

        <span class="c1">#Set Icons main tab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">setTabIcon</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/plugins/Tilgjengelighet/icons/friluft.png&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">setTabIcon</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/plugins/Tilgjengelighet/icons/tettsted.png&quot;</span><span class="p">))</span>

        <span class="c1">#change search name based on tab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">currentChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_search_name</span><span class="p">)</span> <span class="c1">#change search name based on tab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">currentChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_search_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">currentChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_search_name</span><span class="p">)</span>

        <span class="c1">#Connect pushbuttons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">pushButton_filtrer</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filtrer</span><span class="p">)</span> <span class="c1">#Connect pushbytton filtrer action</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">pushButton_reset</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">)</span> <span class="c1">#resett all choses made by user</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">change_search_name</span><span class="p">()</span> <span class="c1">#Initiate a search name</span>


        <span class="c1">### table window ###</span>
        <span class="c1">## NB: Table window changed to attribute table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span> <span class="o">=</span> <span class="n">TableDialog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setSelectionBehavior</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">SelectRows</span><span class="p">)</span> <span class="c1">#select entire row in table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">tableWidget</span><span class="o">.</span><span class="n">setEditTriggers</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">NoEditTriggers</span><span class="p">)</span> <span class="c1">#Making table unediteble</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addDockWidget</span><span class="p">(</span> <span class="n">Qt</span><span class="o">.</span><span class="n">BottomDockWidgetArea</span> <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dock</span> <span class="p">)</span> <span class="c1">#adding seartch result Widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1">#Start pløugin without this dialog</span>

        <span class="c1">### info window ###</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span> <span class="o">=</span> <span class="n">infoWidgetDialog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">pushButton_filtrer</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">show</span><span class="p">())</span> <span class="c1">#open main window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">pushButton_filtrer</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_previus_search_activeLayer</span><span class="p">)</span> <span class="c1">#setting main window to match search for active layer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">pushButton_next</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">infoWidget_next</span><span class="p">)</span> <span class="c1">#itterate the selected objekts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">pushButton_prev</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">infoWidget_prev</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">pushButton_tabell</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_tabell</span><span class="p">)</span> <span class="c1">#open tableWiddget</span>

        <span class="c1"># Set tools an icons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectPolygon</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/plugins/Tilgjengelighet/icons/Select_polygon.gif&quot;</span><span class="p">),</span>
                                       <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s2">&quot;MyPlugin&quot;</span><span class="p">,</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">),</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span> <span class="c1">#Change therese icons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectPoint</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/plugins/Tilgjengelighet/icons/Select_point_1.gif&quot;</span><span class="p">),</span>
                                       <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s2">&quot;MyPlugin&quot;</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;Punkt/Frihånd&quot;</span><span class="p">),</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span> <span class="c1">#Change therese icons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectPolygon</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">actionSelectPolygon</span><span class="p">()</span><span class="o">.</span><span class="n">trigger</span><span class="p">())</span> <span class="c1">#select objects by polygon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectPoint</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">actionSelectFreehand</span><span class="p">()</span><span class="o">.</span><span class="n">trigger</span><span class="p">())</span> <span class="c1">#select objects by freehand</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">toolButton_velgikart</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selectPolygon</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">toolButton_velgikart</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selectPoint</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">exportExcel</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/plugins/Tilgjengelighet/icons/black-ms-excel-16.png&quot;</span><span class="p">),</span>
                                       <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s2">&quot;MyPlugin&quot;</span><span class="p">,</span> <span class="s2">&quot;Excel&quot;</span><span class="p">),</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span> <span class="c1">#Change therese icons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exportImage</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;:/plugins/Tilgjengelighet/icons/Export_map.gif&quot;</span><span class="p">),</span>
                                       <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s2">&quot;MyPlugin&quot;</span><span class="p">,</span> <span class="s2">&quot;Bilde&quot;</span><span class="p">),</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span> <span class="c1">#Change therese icons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exportExcel</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">excelSave</span><span class="p">)</span> <span class="c1">#export tp excel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exportImage</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imageSave</span><span class="p">)</span> <span class="c1">#ecport image</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">toolButton_eksporter</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exportExcel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">toolButton_eksporter</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exportImage</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addDockWidget</span><span class="p">(</span> <span class="n">Qt</span><span class="o">.</span><span class="n">BottomDockWidgetArea</span> <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span> <span class="p">)</span> <span class="c1">#adding seartch result Widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1">#Start plugin with infoWidget dialog closed</span>


        <span class="c1">### Export window ###</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span> <span class="o">=</span> <span class="n">exportLayerDialog</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">pushButton_bla</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">OpenBrowser</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">pushButton_lagre</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lagre_lag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">pushButton_lagre</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">close</span><span class="p">())</span> <span class="c1">#close winwo when you have saved layer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">pushButton_avbryt</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">close</span><span class="p">())</span>
        
        
        <span class="c1">### Fill gui ###</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_fylker</span><span class="p">()</span> <span class="c1">#fill fylker combobox</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fylke_valgt</span><span class="p">()</span> <span class="c1">#Filling up kommune combobox</span>

        <span class="c1">#set combobox functions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylke_valgt</span><span class="p">)</span> <span class="c1">#Filling cityes from county</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_search_name</span><span class="p">)</span> <span class="c1">#setting search name based on fylke</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kommuner</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_search_name</span><span class="p">)</span> <span class="c1">#setting search name based on komune</span>

        <span class="c1">#Assign fylker and kommuner to AttributeForm</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fylker</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;fylker&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_fylke</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fylker</span><span class="o">.</span><span class="n">setComboBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kommuner</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;komune&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_kommune</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kommuner</span><span class="o">.</span><span class="n">setComboBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kommuner</span><span class="p">)</span>

        <span class="c1">#Create attributes object tettsted</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_combobox_inngang</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_combobox_vei</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_combobox_hc_parkering</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_combobox_parkeringsomraade</span><span class="p">()</span>

        <span class="c1">#Create attributes object friluft (Needs futher methods for filling rest of friluft)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_combobox_baderampe</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_combobox_fiskeplass</span><span class="p">()</span>

        <span class="c1">#Dictionarys for all attributes in different object type. Key equals name of tab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_tettsted</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sa">u</span><span class="s2">&quot;HC-Parkering&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_hcparkering</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;Inngang&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_inngang</span><span class="p">,</span> 
            <span class="sa">u</span><span class="s1">&#39;Parkeringsområde&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_pomrade</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;Vei&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_vei</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_friluft</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sa">u</span><span class="s2">&quot;Baderampe&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_baderampe</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;Fiskeplass&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_fiskeplass</span>
        <span class="p">}</span>

        
        <span class="bp">self</span><span class="o">.</span><span class="n">openLayer_background_init</span><span class="p">()</span> <span class="c1">#Activate open layers</span></div>
        

    <span class="c1">############################# Assign widget to attributeform and fill comboboxes #################################</span>

<div class="viewcode-block" id="Tilgjengelighet.assign_combobox_inngang"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.assign_combobox_inngang">[docs]</a>    <span class="k">def</span> <span class="nf">assign_combobox_inngang</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assigning a AttributeForm object to each option in inngang&quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">avstandHC</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;avstandHC&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_avstand_hc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_avstand_hc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ank_stigning</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;stigningAdkomstvei&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_ank_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_ank_stigning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">byggningstype</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;funksjon&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_byggningstype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rampe</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;rampe&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rampe</span><span class="p">,</span> <span class="n">comboBoxText</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Ja&quot;</span> <span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Nei&quot;</span> <span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dortype</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;dørtype&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dortype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dorapner</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;døråpner&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dorapner</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">man_hoyde</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;manøverknappHøyde&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_man_hoyde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_man_hoyde</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dorbredde</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;InngangBredde&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dorbredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_dorbredde</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terskel</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;terskelH</span><span class="se">\xf8</span><span class="s1">yde&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_terskel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_terskel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kontrast</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;kontrast&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kontrast</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rampe_stigning</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;rampeStigning&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_rmp_stigning</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rmp_stigning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rampe_bredde</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;rampeBredde&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_bredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_rmp_bredde</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rmp_bredde</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handlist</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;h</span><span class="se">\xe5</span><span class="s1">ndlist&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_handliste</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_handliste</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handlist1</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;h</span><span class="se">\xe5</span><span class="s1">ndlistH</span><span class="se">\xf8</span><span class="s1">yde1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_hand1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_hand1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_hand1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handlist2</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;h</span><span class="se">\xe5</span><span class="s1">ndlistH</span><span class="se">\xf8</span><span class="s1">yde2&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_hand2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_hand2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_hand2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rmp_tilgjengelig</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;rampeTilgjengelig&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rmp_tilgjengelig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rmp_tilgjengelig</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">manuellRullestol</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingRullestol&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_manuell_rullestol</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elektriskRullestol</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingElRull&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_el_rullestol</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">synshemmet</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingSyn&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_syn</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_inngang</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">avstandHC</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ank_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">byggningstype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rampe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dortype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dorapner</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">man_hoyde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dorbredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">terskel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kontrast</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rampe_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rampe_bredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rmp_tilgjengelig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">manuellRullestol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">elektriskRullestol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">synshemmet</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_inngang_gui</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">byggningstype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dortype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dorapner</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kontrast</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rmp_tilgjengelig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">manuellRullestol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">elektriskRullestol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">synshemmet</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_inngang_mer_mindre</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">avstandHC</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ank_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">man_hoyde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dorbredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">terskel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rampe_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rampe_bredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_rampe</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">rampe_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rampe_bredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handlist2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rmp_tilgjengelig</span><span class="p">]</span>

        <span class="c1">#fill combobox</span>
        <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;:/plugins/Tilgjengelighet/&quot;</span> <span class="c1">#Mey not need this</span>
        <span class="k">for</span> <span class="n">attributt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_inngang_mer_mindre</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">attributt</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="s1">&#39;\combobox_values\mer_mindre.txt&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rampe</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;\combobox_values\boolean.txt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">byggningstype</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tettstedInngangByggningstype.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dortype</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tettstedInngangdortype.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dorapner</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tettstedInngangDorapner.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kontrast</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tettstedKontrast.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handlist</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\handlist.txt&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rmp_tilgjengelig</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">manuellRullestol</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">elektriskRullestol</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">synshemmet</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>

        <span class="c1">#Set what to be hidden in form and conditions for showing parts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hide_show_gui</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attributes_rampe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rampe</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">==</span> <span class="sa">u</span><span class="s2">&quot;Ja&quot;</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rampe_boxs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">line_inngang_rampe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">line</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rampe</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hide_show_gui</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attributes_rampe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_rampe</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">==</span> <span class="sa">u</span><span class="s2">&quot;Ja&quot;</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_rampe_boxs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">line_inngang_rampe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">line</span><span class="p">]))</span></div>
        <span class="c1">#self.dlg.comboBox_rampe.currentIndexChanged.connect(self.hide_show_rampe)</span>


<div class="viewcode-block" id="Tilgjengelighet.assign_combobox_vei"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.assign_combobox_vei">[docs]</a>    <span class="k">def</span> <span class="nf">assign_combobox_vei</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assigning a AttributeForm object to each option in vei&quot;&quot;&quot;</span>

        <span class="n">gatetype</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;gatetype&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_gatetype</span><span class="p">)</span>
        <span class="n">nedsenkning1</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;nedsenk1&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_nedsenkning1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_nedsenkning1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_nedsenkning1</span><span class="p">)</span>
        <span class="n">nedsenkning2</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;nedsenk2&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_nedsenkning2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_nedsenkning2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_nedsenkning2</span><span class="p">)</span>
        <span class="n">dekke_vei_tettsted</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;dekke&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dekke_vei_tettsted</span><span class="p">)</span>
        <span class="n">dekkeTilstand_vei_tettsted</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;dekkeTilstand&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dekkeTilstand_vei_tettsted</span><span class="p">)</span>
        <span class="n">bredde</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;bredde&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_bredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_bredde</span><span class="p">)</span>
        <span class="n">stigning</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;stigning&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_stigning</span><span class="p">)</span>
        <span class="n">tverfall</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tverrfall&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_tverfall</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_tverfall</span><span class="p">)</span>
        <span class="n">ledelinje</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;ledelinje&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_ledelinje</span><span class="p">)</span>
        <span class="n">ledelinjeKontrast</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;ledelinjeKontrast&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_ledelinjeKontrast</span><span class="p">)</span>

        <span class="n">manuell_rullestol_vei</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingRullestol&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_manuell_rullestol_vei</span><span class="p">)</span>
        <span class="n">electrisk_rullestol_vei</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingElRull&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_electrisk_rullestol_vei</span><span class="p">)</span>
        <span class="n">syn_vei</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingSyn&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_syn_vei</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_vei</span> <span class="o">=</span> <span class="p">[</span><span class="n">gatetype</span><span class="p">,</span> <span class="n">nedsenkning1</span><span class="p">,</span> <span class="n">nedsenkning2</span><span class="p">,</span> <span class="n">dekke_vei_tettsted</span><span class="p">,</span> <span class="n">dekkeTilstand_vei_tettsted</span><span class="p">,</span> <span class="n">bredde</span><span class="p">,</span> <span class="n">stigning</span><span class="p">,</span> <span class="n">tverfall</span><span class="p">,</span> <span class="n">ledelinje</span><span class="p">,</span> <span class="n">ledelinjeKontrast</span><span class="p">,</span> <span class="n">manuell_rullestol_vei</span><span class="p">,</span> <span class="n">electrisk_rullestol_vei</span><span class="p">,</span> <span class="n">syn_vei</span><span class="p">]</span>
        <span class="n">attributes_vei_gui</span> <span class="o">=</span> <span class="p">[</span><span class="n">gatetype</span><span class="p">,</span> <span class="n">dekke_vei_tettsted</span><span class="p">,</span> <span class="n">dekkeTilstand_vei_tettsted</span><span class="p">,</span> <span class="n">ledelinje</span><span class="p">,</span> <span class="n">ledelinjeKontrast</span><span class="p">,</span> <span class="n">manuell_rullestol_vei</span><span class="p">,</span> <span class="n">electrisk_rullestol_vei</span><span class="p">,</span> <span class="n">syn_vei</span><span class="p">]</span>
        <span class="n">attributes_vei_mer_mindre</span> <span class="o">=</span> <span class="p">[</span><span class="n">nedsenkning1</span><span class="p">,</span><span class="n">nedsenkning2</span><span class="p">,</span><span class="n">bredde</span><span class="p">,</span><span class="n">stigning</span><span class="p">,</span><span class="n">tverfall</span><span class="p">]</span>
        <span class="n">attributes_nedsenkning</span> <span class="o">=</span> <span class="p">[</span><span class="n">nedsenkning1</span><span class="p">,</span> <span class="n">nedsenkning2</span><span class="p">]</span>

        <span class="c1">#fill combobox</span>
        <span class="k">for</span> <span class="n">attributt</span> <span class="ow">in</span> <span class="n">attributes_vei_mer_mindre</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">attributt</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="s1">&#39;\combobox_values\mer_mindre.txt&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">gatetype</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;\combobox_values\tettstedVeiGatetype.txt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">dekke_vei_tettsted</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tettstedDekke.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">dekkeTilstand_vei_tettsted</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\dekkeTilstand.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">ledelinje</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tettstedVeiLedelinje.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">ledelinjeKontrast</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tettstedKontrast.txt&quot;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">manuell_rullestol_vei</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">electrisk_rullestol_vei</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">syn_vei</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>

        <span class="c1">#Set what to be hidden in form and conditions for showing parts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hide_show_gui</span><span class="p">(</span><span class="n">attributes_nedsenkning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_gatetype</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unspecified</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_gatetype</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hide_show_gui</span><span class="p">(</span><span class="n">attributes_nedsenkning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_gatetype</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unspecified</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tilgjengelighet.assign_combobox_hc_parkering"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.assign_combobox_hc_parkering">[docs]</a>    <span class="k">def</span> <span class="nf">assign_combobox_hc_parkering</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assigning a AttributeForm object to each option in hc parkering&quot;&quot;&quot;</span>

        <span class="n">avstandServicebygg</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;avstandServicebygg&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_avstandServicebygg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_avstandServicebygg</span><span class="p">)</span>

        <span class="n">overbygg</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;overbygg&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_overbygg</span><span class="p">,</span> <span class="n">comboBoxText</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Ja&quot;</span> <span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Nei&quot;</span> <span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">})</span>
        <span class="n">skiltet</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;skiltet&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_skiltet</span><span class="p">,</span> <span class="n">comboBoxText</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Ja&quot;</span> <span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Nei&quot;</span> <span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">})</span>
        <span class="n">merket</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;merket&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_merket</span><span class="p">,</span> <span class="n">comboBoxText</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Ja&quot;</span> <span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Nei&quot;</span> <span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">})</span>

        <span class="n">bredde_hcp_merke</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;bredde&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_bredde_hcp_merke</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_bredde_hcp_merke</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_bredde_hcp_merke</span><span class="p">)</span>
        <span class="n">lengde_hcp_merke</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;lengde&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_lengde_hcp_merke</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_lengde_hcp_merke</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_lengde_hcp_merke</span><span class="p">)</span>

        <span class="n">manuell_rullestol_hcparkering</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingRullestol&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_manuell_rullestol_hcparkering</span><span class="p">)</span>
        <span class="n">elektrisk_rullestol_hcparkering</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingElRull&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_elektrisk_rullestol_hcparkering</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_hcparkering</span> <span class="o">=</span> <span class="p">[</span><span class="n">avstandServicebygg</span><span class="p">,</span> <span class="n">overbygg</span><span class="p">,</span> <span class="n">skiltet</span><span class="p">,</span> <span class="n">merket</span><span class="p">,</span> <span class="n">bredde_hcp_merke</span><span class="p">,</span> <span class="n">lengde_hcp_merke</span><span class="p">,</span> <span class="n">manuell_rullestol_hcparkering</span><span class="p">,</span> <span class="n">elektrisk_rullestol_hcparkering</span><span class="p">]</span>
        <span class="n">attributes_hcparkering_gui</span> <span class="o">=</span> <span class="p">[</span><span class="n">manuell_rullestol_hcparkering</span><span class="p">,</span> <span class="n">elektrisk_rullestol_hcparkering</span><span class="p">]</span>
        <span class="n">attributes_hcparkering_mer_mindre</span> <span class="o">=</span> <span class="p">[</span><span class="n">avstandServicebygg</span><span class="p">,</span> <span class="n">bredde_hcp_merke</span><span class="p">,</span> <span class="n">lengde_hcp_merke</span><span class="p">]</span>

        <span class="c1">#fill combobox</span>
        <span class="k">for</span> <span class="n">attributt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_hcparkering</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">attributt</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="s1">&#39;\combobox_values\mer_mindre.txt&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">overbygg</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;\combobox_values\boolean.txt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">skiltet</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\boolean.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">merket</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\boolean.txt&quot;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">manuell_rullestol_hcparkering</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">elektrisk_rullestol_hcparkering</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>

        <span class="c1">#Set what to be hidden in form and conditions for showing parts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hide_show_gui</span><span class="p">([</span><span class="n">bredde_hcp_merke</span><span class="p">,</span> <span class="n">lengde_hcp_merke</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_merket</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Ja&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_merket</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hide_show_gui</span><span class="p">([</span><span class="n">bredde_hcp_merke</span><span class="p">,</span> <span class="n">lengde_hcp_merke</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_merket</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Ja&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tilgjengelighet.assign_combobox_parkeringsomraade"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.assign_combobox_parkeringsomraade">[docs]</a>    <span class="k">def</span> <span class="nf">assign_combobox_parkeringsomraade</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assigning a AttributeForm object to each option in parkeringsområde&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">overbygg_pomrade</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;overbygg&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_overbygg_pomrade</span><span class="p">,</span> <span class="n">comboBoxText</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Ja&quot;</span> <span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Nei&quot;</span> <span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kapasitetPersonbiler</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;kapasitetPersonbiler&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kapasitetPersonbiler</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_kapasitetPersonbiler</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kapasitetUU</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;kapasitetUU&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kapasitetUU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_kapasitetUU</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dekke_pomrade</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;dekke&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dekke_pomrade</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dekkeTilstand_pomrade</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;dekkeTilstand&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_dekkeTilstand_pomrade</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manuell_rullestol_pomrade</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="s2">&quot;tilgjengvurderingRullestol&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_manuell_rullestol_pomrade</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_pomrade</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">overbygg_pomrade</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kapasitetPersonbiler</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kapasitetUU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dekke_pomrade</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dekkeTilstand_pomrade</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">manuell_rullestol_pomrade</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_pomrade_gui</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dekke_pomrade</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dekkeTilstand_pomrade</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">manuell_rullestol_pomrade</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_pomrade_mer_mindre</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">kapasitetPersonbiler</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kapasitetUU</span><span class="p">]</span>

        <span class="c1">#fill combobox</span>
        <span class="k">for</span> <span class="n">attributt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_pomrade_mer_mindre</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">attributt</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="s1">&#39;\combobox_values\mer_mindre.txt&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">overbygg_pomrade</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;\combobox_values\boolean.txt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dekke_pomrade</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tettstedDekke.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dekkeTilstand_pomrade</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\dekkeTilstand.txt&quot;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">manuell_rullestol_pomrade</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tilgjengelighet.assign_combobox_baderampe"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.assign_combobox_baderampe">[docs]</a>    <span class="k">def</span> <span class="nf">assign_combobox_baderampe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assigning a AttributeForm object to each option in Baderampe&quot;&quot;&quot;</span>

        <span class="n">rampe</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;rampe&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_baderampe_rampe</span><span class="p">)</span>
        <span class="n">rampeBredde</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;rampeBredde&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_baderampe_rampeBredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_baderampe_rampeBredde</span><span class="p">)</span>
        <span class="n">rampeStigning</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;rampeStigning&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_baderampe_rampeStigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_baderampe_rampeStigning</span><span class="p">)</span>
        <span class="n">handlist</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;håndlist&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_baderampe_handliste</span><span class="p">)</span>
        <span class="n">handlistHoyde1</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;håndlistHøyde1&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_baderampe_handlistHoyde1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_baderampe_handlistHoyde1</span><span class="p">)</span>
        <span class="n">handlistHoyde2</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;håndlistHøyde2&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_baderampe_handlistHoyde2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_baderampe_handlistHoyde2</span><span class="p">)</span>
        <span class="n">rampeTilgjengelig</span> <span class="o">=</span>  <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;rampeTilgjengelig&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_baderampe_rampeTilgjengelig</span><span class="p">)</span>

        <span class="n">tilgjengvurderingRullestol</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;tilgjengvurderingRullestol&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_baderampe_tilgjengvurderingRullestol</span><span class="p">)</span>
        <span class="n">tilgjengvurderingSyn</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;tilgjengvurderingSyn&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_baderampe_tilgjengvurderingSyn</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_baderampe</span> <span class="o">=</span> <span class="p">[</span><span class="n">rampe</span><span class="p">,</span> <span class="n">rampeBredde</span><span class="p">,</span> <span class="n">rampeStigning</span><span class="p">,</span> <span class="n">handlist</span><span class="p">,</span> <span class="n">handlistHoyde1</span><span class="p">,</span> <span class="n">handlistHoyde2</span><span class="p">,</span> <span class="n">rampeTilgjengelig</span><span class="p">,</span> <span class="n">tilgjengvurderingRullestol</span><span class="p">,</span> <span class="n">tilgjengvurderingSyn</span><span class="p">]</span>
        <span class="n">attributes_mer_mindre</span> <span class="o">=</span> <span class="p">[</span><span class="n">rampeBredde</span><span class="p">,</span> <span class="n">rampeStigning</span><span class="p">,</span> <span class="n">handlistHoyde1</span><span class="p">,</span> <span class="n">handlistHoyde2</span><span class="p">]</span>

        <span class="c1">#Fill combobox</span>
        <span class="k">for</span> <span class="n">attributt</span> <span class="ow">in</span> <span class="n">attributes_mer_mindre</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">attributt</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="s1">&#39;\combobox_values\mer_mindre.txt&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">rampe</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;\combobox_values\boolean.txt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">handlist</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\handlist.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">rampeTilgjengelig</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">tilgjengvurderingRullestol</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">tilgjengvurderingSyn</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tilgjengelighet.assign_combobox_fiskeplass"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.assign_combobox_fiskeplass">[docs]</a>    <span class="k">def</span> <span class="nf">assign_combobox_fiskeplass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assigning a AttributeForm object to each option in Baderampe&quot;&quot;&quot;</span>

        <span class="n">rampe</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;rampe&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_rampe</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_fiskeplass_rampe</span><span class="p">)</span>
        <span class="n">dekke</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;dekke&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_dekke</span><span class="p">)</span>
        <span class="n">plankeavstand</span> <span class="o">=</span>  <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;plankeavstand  &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_plankeavstand</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_fiskeplass_plankeavstand</span><span class="p">,</span>  <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_fiskeplass_plankeavstand</span><span class="p">)</span>
        <span class="n">dekkeTilstand</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;dekkeTilstand&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_dekke_tilstand</span><span class="p">)</span>
        <span class="n">diameter</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;diameter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_snusirkel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_fiskeplass_snusirkel</span><span class="p">)</span>
        <span class="n">rekkverk</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;rekkverk&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_rekkverk</span><span class="p">)</span>
        <span class="n">stoppkant</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;stoppkant&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_stoppkant</span><span class="p">)</span>
        <span class="n">stoppkantHoyde</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;stoppkantHøyde&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_stoppkant_hoyde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_fiskeplass_stoppkant_hoyde</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_fiskeplass_stoppkant_hoyde</span><span class="p">)</span>

        <span class="n">rampeBredde</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;rampeBredde&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_rampe_bredde</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_fiskeplass_rampe_bredde</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_fiskeplass_rampe_bredde</span><span class="p">)</span>
        <span class="n">rampeStigning</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;rampeStigning&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_rampe_stigning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_fiskeplass_rampe_stigning</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_fiskeplass_rampe_stigning</span><span class="p">)</span>
        <span class="n">handlist</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;håndlist&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_handliste</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_fiskeplass_handliste</span><span class="p">)</span>
        <span class="n">handlistHoyde1</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;håndlistHøyde1&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_handlist1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_fiskeplass_handlist1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_fiskeplass_handlist1</span><span class="p">)</span>
        <span class="n">handlistHoyde2</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;håndlistHøyde2&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_handlist2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_fiskeplass_handlist2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_fiskeplass_handlist2</span><span class="p">)</span>
        <span class="n">rampeTilgjengelig</span> <span class="o">=</span>  <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;rampeTilgjengelig&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_rampe_tilgjengelig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_fiskeplass_rampe_tilgjengelig</span><span class="p">)</span>

        <span class="n">tilgjengvurderingRullestol</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;tilgjengvurderingRullestol&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_manuell_rullestol</span><span class="p">)</span>
        <span class="n">tilgjengvurderingElRullestol</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;tilgjengvurderingElRullestol&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_el_rullestol</span><span class="p">)</span>
        <span class="n">tilgjengvurderingSyn</span> <span class="o">=</span> <span class="n">AttributeForm</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;tilgjengvurderingSyn&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_syn</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">attributes_fiskeplass</span> <span class="o">=</span> <span class="p">[</span><span class="n">rampe</span><span class="p">,</span> <span class="n">dekke</span><span class="p">,</span> <span class="n">plankeavstand</span><span class="p">,</span> <span class="n">dekkeTilstand</span><span class="p">,</span> <span class="n">diameter</span><span class="p">,</span> <span class="n">rekkverk</span><span class="p">,</span> <span class="n">stoppkant</span><span class="p">,</span> <span class="n">stoppkantHoyde</span><span class="p">,</span> <span class="n">rampeBredde</span><span class="p">,</span> <span class="n">rampeStigning</span><span class="p">,</span> <span class="n">handlist</span><span class="p">,</span> <span class="n">handlistHoyde1</span><span class="p">,</span> <span class="n">handlistHoyde2</span><span class="p">,</span> <span class="n">rampeTilgjengelig</span><span class="p">,</span> <span class="n">tilgjengvurderingRullestol</span><span class="p">,</span> <span class="n">tilgjengvurderingElRullestol</span><span class="p">,</span> <span class="n">tilgjengvurderingSyn</span><span class="p">]</span>
        <span class="n">attributes_mer_mindre</span> <span class="o">=</span> <span class="p">[</span><span class="n">plankeavstand</span><span class="p">,</span> <span class="n">diameter</span><span class="p">,</span> <span class="n">stoppkantHoyde</span><span class="p">,</span> <span class="n">rampeBredde</span><span class="p">,</span> <span class="n">rampeStigning</span><span class="p">,</span> <span class="n">handlistHoyde1</span><span class="p">,</span> <span class="n">handlistHoyde2</span><span class="p">]</span>
        <span class="n">attributes_rampe</span> <span class="o">=</span> <span class="p">[</span><span class="n">rampeBredde</span><span class="p">,</span> <span class="n">rampeStigning</span><span class="p">,</span> <span class="n">handlist</span><span class="p">,</span> <span class="n">handlistHoyde1</span><span class="p">,</span> <span class="n">handlistHoyde2</span><span class="p">,</span> <span class="n">rampeTilgjengelig</span><span class="p">]</span>

        <span class="c1">#Fill combobox</span>
        <span class="k">for</span> <span class="n">attributt</span> <span class="ow">in</span> <span class="n">attributes_mer_mindre</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">attributt</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="s1">&#39;\combobox_values\mer_mindre.txt&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">rampe</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;\combobox_values\boolean.txt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">dekke</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;\combobox_values\friluftDekke.txt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">dekkeTilstand</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;\combobox_values\dekkeTilstand.txt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">rekkverk</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;\combobox_values\boolean.txt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">stoppkant</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;\combobox_values\boolean.txt&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">handlist</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\handlist.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">rampeTilgjengelig</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">tilgjengvurderingRullestol</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">tilgjengvurderingElRullestol</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_combobox</span><span class="p">(</span><span class="n">tilgjengvurderingSyn</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\combobox_values\tilgjengvurdering.txt&quot;</span><span class="p">)</span>

        <span class="c1">#Set what to be hidden in form and conditions for showing parts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hide_show_gui</span><span class="p">(</span><span class="n">attributes_rampe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_rampe</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">==</span> <span class="sa">u</span><span class="s2">&quot;Ja&quot;</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_fiskeplass_rampe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">line_fiskeplass_rampe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">line_fiskeplass</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_rampe</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hide_show_gui</span><span class="p">(</span><span class="n">attributes_rampe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_rampe</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">==</span> <span class="sa">u</span><span class="s2">&quot;Ja&quot;</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">label_fiskeplass_rampe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">line_fiskeplass_rampe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">line_fiskeplass</span><span class="p">]))</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">hide_show_gui</span><span class="p">([</span><span class="n">plankeavstand</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_dekke</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unspecified</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_dekke</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hide_show_gui</span><span class="p">([</span><span class="n">plankeavstand</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_dekke</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unspecified</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">hide_show_gui</span><span class="p">([</span><span class="n">stoppkantHoyde</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_stoppkant</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">==</span> <span class="sa">u</span><span class="s2">&quot;Ja&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_stoppkant</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hide_show_gui</span><span class="p">([</span><span class="n">stoppkantHoyde</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fiskeplass_stoppkant</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">==</span> <span class="sa">u</span><span class="s2">&quot;Ja&quot;</span><span class="p">))</span></div>




    <span class="c1">################################# Automate tools ####################################</span>

<div class="viewcode-block" id="Tilgjengelighet.resolve"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.resolve">[docs]</a>    <span class="k">def</span> <span class="nf">resolve</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">basepath</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">basepath</span><span class="p">:</span>
          <span class="n">basepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basepath</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tilgjengelighet.unload"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.unload">[docs]</a>    <span class="k">def</span> <span class="nf">unload</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes the plugin menu item and icon from QGIS GUI.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">removePluginWebMenu</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;&amp;Kartverket Tilgjengelighet&#39;</span><span class="p">),</span>
                <span class="n">action</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">removeToolBarIcon</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
        <span class="c1"># remove the toolbar</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span></div>


<div class="viewcode-block" id="Tilgjengelighet.get_temppath"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.get_temppath">[docs]</a>    <span class="k">def</span> <span class="nf">get_temppath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creating a temperarly path for a temperary file</span>
<span class="sd">        </span>
<span class="sd">        :param filename: String name for file</span>
<span class="sd">        :type filename: str, QString</span>

<span class="sd">        :returns: string of full path</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">tmpdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tempfile</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">(),</span><span class="s1">&#39;Tilgjengelighet&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">)</span>
        <span class="n">tmpfile</span><span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tmpfile</span></div>


<div class="viewcode-block" id="Tilgjengelighet.to_unicode"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.to_unicode">[docs]</a>    <span class="k">def</span> <span class="nf">to_unicode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Transforme string to unicode</span>

<span class="sd">        :param in_string: String to transforme</span>

<span class="sd">        :returns: unicode verson of string</span>
<span class="sd">        :rtype: unicode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_string</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="n">out_string</span> <span class="o">=</span> <span class="n">in_string</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_string</span><span class="p">,</span><span class="n">unicode</span><span class="p">):</span>
            <span class="n">out_string</span> <span class="o">=</span> <span class="n">in_string</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;not stringy&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out_string</span></div>


<div class="viewcode-block" id="Tilgjengelighet.hide_show_gui"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.hide_show_gui">[docs]</a>    <span class="k">def</span> <span class="nf">hide_show_gui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attributeForms</span><span class="p">,</span> <span class="n">condition</span><span class="p">,</span> <span class="n">extra</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Shows parts of GUI if conditions are meat, hids it if not</span>

<span class="sd">        :param attributeForms: A list of witch attributes to hide in GUI</span>
<span class="sd">        :type attributeForms: list&lt;AttributeForm&gt;</span>
<span class="sd">        :param condition: The condition to show GUI parts</span>
<span class="sd">        :type condition: boolean</span>
<span class="sd">        :param extra: include if gui consists of more than attributes that needs to be showed/hidden</span>
<span class="sd">        :type extra: list&lt;QtWidgets&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Itterate throu alle attributes that need to be hidden or showd</span>
        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attributeForms</span><span class="p">:</span>
            <span class="n">attribute</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">condition</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getLineEdit</span><span class="p">():</span>
                <span class="n">attribute</span><span class="o">.</span><span class="n">getLineEdit</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">condition</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getLabel</span><span class="p">():</span>
                <span class="n">attribute</span><span class="o">.</span><span class="n">getLabel</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">condition</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">extra</span><span class="p">:</span> <span class="c1">#Hide/Show additional widgets</span>
            <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">condition</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tilgjengelighet.fill_combobox"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.fill_combobox">[docs]</a>    <span class="k">def</span> <span class="nf">fill_combobox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">combobox</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fikks combobox with lines from filename</span>

<span class="sd">        :param combobox: The combobox to be filled</span>
<span class="sd">        :type combobox: QComboBox</span>
<span class="sd">        :param filename: name of file with info to be filled in combobox</span>
<span class="sd">        :type filename: str, QString</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">combobox</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span> <span class="c1">#Clear possible information in combobox</span>
        <span class="n">combobox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unspecified</span><span class="p">)</span> <span class="c1">#Include an empty, unspesifised field for combobox</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">combobox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="n">line</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span> <span class="c1">#Add line to combobox</span></div>


<div class="viewcode-block" id="Tilgjengelighet.fill_infoWidget"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.fill_infoWidget">[docs]</a>    <span class="k">def</span> <span class="nf">fill_infoWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attributes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Filling infowidget with attributes name and no value. Also ajustes size of infowidget</span>

<span class="sd">        :param attributes: List of gui attriibutes</span>
<span class="sd">        :type attributes: list&lt;AttributeForms&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">attributes</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">attributes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">())</span> <span class="c1">#Sets attribute name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span> <span class="c1">#Set sign for no value</span>

            <span class="c1">#Show line in case the line is hidden</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">attributes</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span> <span class="c1">#Hides rows that are not used</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tilgjengelighet.fill_fylker"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.fill_fylker">[docs]</a>    <span class="k">def</span> <span class="nf">fill_fylker</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fill up the combobox fylker with fylker from komm.txt&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Norge&quot;</span><span class="p">)</span> <span class="c1">#Option for not chosing a single county</span>

        <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="s2">&quot;\komm.txt&quot;</span>

        <span class="c1">#Inititate dictionarys for fylke and kommune</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nr</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nm</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">komm_nr</span><span class="p">,</span> <span class="n">kommune</span><span class="p">,</span> <span class="n">fylke</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">((</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">))</span> <span class="c1">#remove linebreak, spilt on tab</span>

                <span class="c1">#translate text to unicode</span>
                <span class="n">komm_nr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="n">komm_nr</span><span class="p">)</span>
                <span class="n">kommune</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="n">kommune</span><span class="p">)</span>
                <span class="n">fylke</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="n">fylke</span><span class="p">)</span>

                <span class="c1">#Fill dictionarys</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nr</span><span class="p">[</span><span class="n">komm_nr</span><span class="p">]</span> <span class="o">=</span> <span class="n">kommune</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nm</span><span class="p">[</span><span class="n">kommune</span><span class="p">]</span> <span class="o">=</span> <span class="n">komm_nr</span>

                <span class="c1">#If fylke is not in combobox, add fylke and list to fylke_dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">fylke</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">fylke</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">komm_nr</span><span class="p">)</span> <span class="c1">#add kommune numbers to fylke list in fylke dict</span></div>


    <span class="c1">############################ Actions ##################################</span>

<div class="viewcode-block" id="Tilgjengelighet.get_previus_search_activeLayer"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.get_previus_search_activeLayer">[docs]</a>    <span class="k">def</span> <span class="nf">get_previus_search_activeLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open filtering window set to preweus choises&quot;&quot;&quot;</span>

        <span class="n">activeLayer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">activeLayer</span><span class="p">()</span>
        <span class="c1">#if self.search_history[activeLayer.name()]:</span>
        <span class="k">if</span> <span class="n">activeLayer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">activeLayer</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">:</span> <span class="c1">#Check that actice layers is in search history</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">pre_search</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">[</span><span class="n">activeLayer</span><span class="o">.</span><span class="n">name</span><span class="p">()]</span> <span class="c1">#Get previus search</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">pre_search</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span> <span class="c1">#key: AttributeForm, value[0]: combobox index, value[1]; lineEdit text</span>
                    <span class="n">key</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">()</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="c1">#Set combobx to given index</span>
                    <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="c1">#if attribute has lineEdit and text</span>
                        <span class="n">key</span><span class="o">.</span><span class="n">getLineEdit</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c1">#Fill lineEdit with given text</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">pre_search</span><span class="o">.</span><span class="n">tabIndex_main</span><span class="p">)</span> <span class="c1">#set main tab to given index</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">pre_search</span><span class="o">.</span><span class="n">tabIndex_friluft</span><span class="p">)</span> <span class="c1">#Set friluft tab to given index</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">pre_search</span><span class="o">.</span><span class="n">tabIndex_tettsted</span><span class="p">)</span> <span class="c1">#Set tettsted tab to given index</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_search_name</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_name</span><span class="p">)</span> <span class="c1">#Sett search name to given text</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1">#Open filtrer window</span>

            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">raise</span></div>



<div class="viewcode-block" id="Tilgjengelighet.fylke_valgt"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.fylke_valgt">[docs]</a>    <span class="k">def</span> <span class="nf">fylke_valgt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fill up kommune combobox with kommune in chosen fylke&quot;&quot;&quot;</span>

        <span class="n">fylke</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kommuner</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span> <span class="c1">#Clear combobox to fill with new values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kommuner</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unspecified</span><span class="p">)</span> <span class="c1">#Add unspesified value</span>
        <span class="k">if</span> <span class="n">fylke</span> <span class="o">!=</span> <span class="s2">&quot;Norge&quot;</span><span class="p">:</span> <span class="c1">#If value other that Norge was chosen</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">kommune_nr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">]:</span> <span class="c1">#Fill combobx with all values given county</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kommuner</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nr</span><span class="p">[</span><span class="n">kommune_nr</span><span class="p">])</span> <span class="c1">#Get kommune name from kommune nummber</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1">#No spesific county chosen, add all kommuner</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">+</span> <span class="s2">&quot;\komm.txt&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
                        <span class="n">komm_nr</span><span class="p">,</span> <span class="n">komune</span><span class="p">,</span> <span class="n">fylke</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">((</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">))</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kommuner</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nr</span><span class="p">[</span><span class="n">komm_nr</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tilgjengelighet.kommune_valgt"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.kommune_valgt">[docs]</a>    <span class="k">def</span> <span class="nf">kommune_valgt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Alter the name on seach after a kommune is chosen&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kommuner</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span> <span class="c1">#A kommune is chocen</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_search_name</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_search_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kommuner</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span> <span class="c1">#Set searchname with name of kommune as ending</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_search_name</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_search_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span> <span class="c1">#Set searchname with name of county as ending</span></div>


<div class="viewcode-block" id="Tilgjengelighet.change_search_name"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.change_search_name">[docs]</a>    <span class="k">def</span> <span class="nf">change_search_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Changes the name of search based on current tab and fyle and kommune&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_search_name</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1">#If main tab is in friluft</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_search_name</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_search_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()))</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1">#if main tab is in tettsted</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_search_name</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_search_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">kommune_valgt</span><span class="p">()</span></div>
        <span class="c1"># if self.dlg.comboBox_kommuner.currentText() != &quot;&quot;:</span>
        <span class="c1">#     self.dlg.lineEdit_search_name.setText(self.dlg.lineEdit_search_name.text() + &quot;: &quot; + self.dlg.comboBox_kommuner.currentText())</span>
        <span class="c1"># else:</span>
        <span class="c1">#     self.dlg.lineEdit_search_name.setText(self.dlg.lineEdit_search_name.text() + &quot;: &quot; + self.dlg.comboBox_fylker.currentText())</span>


<div class="viewcode-block" id="Tilgjengelighet.save_search"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.save_search">[docs]</a>    <span class="k">def</span> <span class="nf">save_search</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;Saves the search to search history so it can set choises in GUI bac to preveus desisions&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">SavedSearch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">())</span> <span class="c1">#saves search tab index, layer name and layer referense</span>
        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span><span class="p">:</span> <span class="c1">#Stores the choises made in current form</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_name</span><span class="p">]</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">attribute</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">()</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()),</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getLineEditText</span><span class="p">())</span> <span class="c1">#Attributes are stored as key in dictionary, index and tex are stored as value</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_name</span><span class="p">]</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylker</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylker</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">()</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()),</span> <span class="kc">None</span><span class="p">)</span> <span class="c1">#stores the choises of fylke and kommune</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_history</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_name</span><span class="p">]</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kommuner</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kommuner</span><span class="o">.</span><span class="n">getComboBox</span><span class="p">()</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()),</span> <span class="kc">None</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tilgjengelighet.show_tabell"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.show_tabell">[docs]</a>    <span class="k">def</span> <span class="nf">show_tabell</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Shows or hide tableWidget&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">pushButton_tabell</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span> <span class="c1">#If pushbutton tabell is check, open attributetable, if not, close attributetable</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">showAttributeTable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">activeLayer</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">attrTables</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">QApplication</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">allWidgets</span><span class="p">()</span> <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">objectName</span><span class="p">()</span> <span class="o">==</span> <span class="sa">u</span><span class="s1">&#39;QgsAttributeTableDialog&#39;</span> <span class="ow">or</span> <span class="n">d</span><span class="o">.</span><span class="n">objectName</span><span class="p">()</span> <span class="o">==</span> <span class="sa">u</span><span class="s1">&#39;AttributeTable&#39;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">attrTables</span><span class="p">:</span>
                <span class="n">x</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="Tilgjengelighet.create_filter"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.create_filter">[docs]</a>    <span class="k">def</span> <span class="nf">create_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">opperator</span><span class="p">,</span> <span class="n">valueReference</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates FE based on input, made to take less space in other method create_filtherencoding</span>

<span class="sd">        :param opperator: opperator for FE</span>
<span class="sd">        :type opperator: str</span>
<span class="sd">        :param valueReference: name of attribute for FE</span>
<span class="sd">        :type valueReference: str</span>
<span class="sd">        :param value: value for FE</span>
<span class="sd">        :type value: str</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">constraint</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;&lt;fes:</span><span class="si">{0}</span><span class="s2">&gt;&lt;fes:ValueReference&gt;app:</span><span class="si">{1}</span><span class="s2">&lt;/fes:ValueReference&gt;&lt;fes:Literal&gt;</span><span class="si">{2}</span><span class="s2">&lt;/fes:Literal&gt;&lt;/fes:</span><span class="si">{0}</span><span class="s2">&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">opperator</span><span class="p">,</span><span class="n">valueReference</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">constraint</span></div>


<div class="viewcode-block" id="Tilgjengelighet.create_filtherencoding"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.create_filtherencoding">[docs]</a>    <span class="k">def</span> <span class="nf">create_filtherencoding</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attributeList</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates FE based on user choices</span>

<span class="sd">        :param attributeList: list of all attriubtes for filterencoding</span>
<span class="sd">        :type attributeList: list&lt;AttributeForms&gt;</span>

<span class="sd">        :returns: FilterEncoding</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">fylke</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_fylker</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">kommune</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox_kommuner</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">constraint</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fylke</span> <span class="o">!=</span> <span class="s2">&quot;Norge&quot;</span> <span class="ow">and</span>  <span class="n">kommune</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">unspecified</span><span class="p">:</span> <span class="c1">#County is chosen, not kommune</span>
            <span class="k">for</span> <span class="n">kommune_nr</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">])):</span> <span class="c1">#itterate all kommune numbers in fylke</span>
                <span class="n">valueReference</span> <span class="o">=</span> <span class="s2">&quot;kommune&quot;</span> 
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">][</span><span class="n">kommune_nr</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span> <span class="c1">#Syntax demands 4 numbers in kommune number</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">][</span><span class="n">kommune_nr</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">][</span><span class="n">kommune_nr</span><span class="p">]</span>
                <span class="n">query</span> <span class="o">+=</span> <span class="s2">&quot;&lt;fes:PropertyIsEqualTo&gt;&lt;fes:ValueReference&gt;app:</span><span class="si">{0}</span><span class="s2">&lt;/fes:ValueReference&gt;&lt;fes:Literal&gt;</span><span class="si">{1}</span><span class="s2">&lt;/fes:Literal&gt;&lt;/fes:PropertyIsEqualTo&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">valueReference</span><span class="p">,</span><span class="n">value</span><span class="p">)</span> <span class="c1">#Input values to FE</span>
                    
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fylke_dict</span><span class="p">[</span><span class="n">fylke</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span> <span class="c1">#Oslo only has 1 kommune, and can&#39;t use or opperators</span>
                <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&lt;Or&gt;</span><span class="si">{0}</span><span class="s2">&lt;/Or&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">query</span><span class="p">)</span> <span class="c1">#Att string within or to include all kommune numbers</span>
        <span class="k">elif</span> <span class="n">kommune</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unspecified</span><span class="p">:</span> <span class="c1">#Kommune is chosen</span>
            <span class="n">valueReference</span> <span class="o">=</span> <span class="s2">&quot;kommune&quot;</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nm</span><span class="p">[</span><span class="n">kommune</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span> <span class="c1">#Syntax demands 4 numbers in kommune number</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nm</span><span class="p">[</span><span class="n">kommune</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">komm_dict_nm</span><span class="p">[</span><span class="n">kommune</span><span class="p">]</span>
            <span class="n">query</span> <span class="o">+=</span> <span class="s2">&quot;&lt;fes:PropertyIsEqualTo&gt;&lt;fes:ValueReference&gt;app:</span><span class="si">{0}</span><span class="s2">&lt;/fes:ValueReference&gt;&lt;fes:Literal&gt;</span><span class="si">{1}</span><span class="s2">&lt;/fes:Literal&gt;&lt;/fes:PropertyIsEqualTo&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">valueReference</span><span class="p">,</span><span class="n">value</span><span class="p">)</span> <span class="c1">#Input values to FE</span>



        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">query</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="c1">#A counto or kommune is chocen</span>
            <span class="n">constraint</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attributeList</span><span class="p">:</span> <span class="c1">#Itterate all attributes in search</span>
            <span class="k">if</span> <span class="n">attribute</span><span class="o">.</span><span class="n">getComboBoxCurrentText</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unspecified</span><span class="p">:</span> <span class="c1">#Combobox  value defined</span>
                <span class="n">valueReference</span> <span class="o">=</span> <span class="n">attribute</span><span class="o">.</span><span class="n">valueReference</span><span class="p">()</span> <span class="c1">#Get valueReference</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">attribute</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="c1">#Get FE value</span>
                <span class="n">opperator</span> <span class="o">=</span> <span class="n">attribute</span><span class="o">.</span><span class="n">opperator</span><span class="p">()</span> <span class="c1">#Get FE opperator</span>
                <span class="n">constraint</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">create_filter</span><span class="p">(</span><span class="n">opperator</span><span class="p">,</span> <span class="n">valueReference</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span> <span class="c1">#Add contraint to list of constraints</span>

        <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">filterString</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span> <span class="c1">#More than one constraint, contraint must be withing And</span>
            <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">constraint</span><span class="p">:</span>
                <span class="n">query</span> <span class="o">+=</span> <span class="n">q</span> <span class="c1">#Create constraint string</span>
            <span class="n">filterString</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;&lt;fes:Filter&gt;&lt;And&gt;</span><span class="si">{0}</span><span class="s2">&lt;/And&gt;&lt;/fes:Filter&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;FILTER=&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="n">filterString</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c1">#One constraint, contraint cabn&#39;t be withing And</span>
            <span class="n">filterString</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;&lt;fes:Filter&gt;</span><span class="si">{0}</span><span class="s2">&lt;/fes:Filter&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="n">constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;FILTER=&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="n">filterString</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">filterString</span> <span class="c1">#return empty filsterString (without &quot;Filter=&quot;)</span></div>
        
        
<div class="viewcode-block" id="Tilgjengelighet.filtrer"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.filtrer">[docs]</a>    <span class="k">def</span> <span class="nf">filtrer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Makes FE and layer based on choises from user an current tab&quot;&quot;&quot;</span>

        <span class="nb">print</span> <span class="p">(</span><span class="sa">u</span><span class="s2">&quot;NewFilterStart&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="c1">#Remove selection for previus search layer</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">removeSelection</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layer_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit_search_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="c1">#gives search layer a name</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_main</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span> <span class="c1">#Maintab is set at friluft, gets values for friluft</span>
            <span class="n">tilgjDB</span> <span class="o">=</span> <span class="s2">&quot;friluft&quot;</span>
            <span class="n">featuretype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">feature_type_friluft</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">())]</span> <span class="c1">#gets feature type based on freaturetype tab in friluft</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_friluft</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">())]</span> <span class="c1">#gets attributes based on freaturetype tab in friluft</span>
            <span class="n">infoWidget_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_friluft</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">())</span> <span class="c1">#gets infowidget title based on freaturetype tab in friluft</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1">#Main tab is set at tettsted, gets values for tettsted</span>
            <span class="n">tilgjDB</span> <span class="o">=</span> <span class="s2">&quot;tettsted&quot;</span>
            <span class="n">featuretype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">feature_type_tettsted</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">())]</span> <span class="c1">#gets feature type based on freaturetype tab in tettsted</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_tettsted</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">())]</span> <span class="c1">#gets attributes based on freaturetype tab in tettsted</span>
            <span class="n">infoWidget_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">tabWidget_tettsted</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">())</span> <span class="c1">#gets infowidget title based on freaturetype tab in tettsted</span>

        <span class="c1">#Create url</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;http://wfs.geonorge.no/skwms1/wfs.tilgjengelighet</span><span class="si">{0}</span><span class="s2">?service=WFS&amp;request=GetFeature&amp;version=2.0.0&amp;srsName=urn:ogc:def:crs:EPSG::4258&amp;typeNames=app:</span><span class="si">{1}</span><span class="s2">&amp;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tilgjDB</span><span class="p">,</span> <span class="n">featuretype</span><span class="p">)</span>
        <span class="c1">#print(&quot;url: {}&quot;.format(url))</span>
        <span class="c1">#Create FE</span>
        <span class="n">filter_encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_filtherencoding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span><span class="p">)</span><span class="c1">#= &quot;FILTER=&lt;fes:Filter&gt;&lt;fes:PropertyIsEqualTo&gt;&lt;fes:ValueReference&gt;app:kommune&lt;/fes:ValueReference&gt;&lt;fes:Literal&gt;0301&lt;/fes:Literal&gt;&lt;/fes:PropertyIsEqualTo&gt;&lt;/fes:Filter&gt;&quot;</span>
        <span class="c1">#print(&quot;FE: {}&quot;.format(filter_encoding))</span>
        <span class="c1">#Create new layer</span>
        <span class="n">new_layer</span> <span class="o">=</span> <span class="n">QgsVectorLayer</span><span class="p">(</span><span class="n">url</span> <span class="o">+</span> <span class="n">filter_encoding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_name</span><span class="p">,</span> <span class="s2">&quot;ogr&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">new_layer</span><span class="o">.</span><span class="n">isValid</span><span class="p">():</span> <span class="c1">#If new layer is valid/contains objekcts, add to canvas</span>
            <span class="n">existing_layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">legendInterface</span><span class="p">()</span><span class="o">.</span><span class="n">layers</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">lyr</span> <span class="ow">in</span> <span class="n">existing_layers</span><span class="p">:</span> <span class="c1">#Removing layers with same name</span>
                    <span class="k">if</span> <span class="n">lyr</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">==</span> <span class="n">new_layer</span><span class="o">.</span><span class="n">name</span><span class="p">():</span>
                        <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">removeMapLayers</span><span class="p">(</span> <span class="p">[</span><span class="n">lyr</span><span class="o">.</span><span class="n">id</span><span class="p">()]</span> <span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">new_layer</span><span class="p">)</span> <span class="c1">#Add new layer</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span> <span class="o">=</span> <span class="n">new_layer</span> <span class="c1">#Sett current layer</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">selectionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selectedObjects</span><span class="p">)</span> <span class="c1">#Filling infoWidget when objects are selected</span>
            
            <span class="c1">#Zoom to layer</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">setExtent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">extent</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">zoomOut</span><span class="p">()</span>

            <span class="c1">#inititate new infowidget</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fill_infoWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">label_typeSok</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">infoWidget_title</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

            <span class="c1">#Close old atribute table</span>
            <span class="n">attrTables</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">QApplication</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">allWidgets</span><span class="p">()</span> <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">objectName</span><span class="p">()</span> <span class="o">==</span> <span class="sa">u</span><span class="s1">&#39;QgsAttributeTableDialog&#39;</span> <span class="ow">or</span> <span class="n">d</span><span class="o">.</span><span class="n">objectName</span><span class="p">()</span> <span class="o">==</span> <span class="sa">u</span><span class="s1">&#39;AttributeTable&#39;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">attrTables</span><span class="p">:</span>
                <span class="n">x</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_tabell</span><span class="p">()</span> <span class="c1">#Show or hide new attribute table</span>
            
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="c1">#removing previus single highlight</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">scene</span><span class="p">()</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span><span class="p">)</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">save_search</span><span class="p">()</span> <span class="c1">#Store search attributes</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1">#closing main window for easyer visualisation of results</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span><span class="s2">&quot;Ingen objekter funnet&quot;</span><span class="p">,</span> <span class="n">msg_title</span><span class="o">=</span><span class="s2">&quot;layer not valid&quot;</span><span class="p">,</span> <span class="n">msg_type</span><span class="o">=</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span> <span class="c1">#Messeage if layer is not valid/not objects was found</span>


        <span class="nb">print</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;NewFilterEnd&quot;</span><span class="p">)</span></div>


    <span class="c1">############################## Selection and info of Objects ################################################</span>
<div class="viewcode-block" id="Tilgjengelighet.selectedObjects"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.selectedObjects">[docs]</a>    <span class="k">def</span> <span class="nf">selectedObjects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selFeatures</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;changing number of selected objects in infowidget and settning current selected object</span>

<span class="sd">        :param selFeatures: Selected features of layer</span>
<span class="sd">         &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selFeatures</span> <span class="o">=</span> <span class="n">selFeatures</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number_of_objects</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">selFeatures</span><span class="p">)</span> <span class="c1">#number of objects selected</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">#Current selected object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">selectedFeatures</span><span class="p">()</span> <span class="c1">#Set selected features</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">obj_info</span><span class="p">()</span> <span class="c1">#Fill infowidget with info on current selected object</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">highlightSelected</span><span class="p">()</span> <span class="c1">#highligt current selected object viewd in infowidget</span></div>


<div class="viewcode-block" id="Tilgjengelighet.highlightSelected"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.highlightSelected">[docs]</a>    <span class="k">def</span> <span class="nf">highlightSelected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Highlights the object viewed in infowidget&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">scene</span><span class="p">()</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span><span class="p">)</span> <span class="c1">#remove previus rubberband</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selection</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="c1">#objects selected is more than 0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span> <span class="o">=</span> <span class="n">QgsRubberBand</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span><span class="n">QGis</span><span class="o">.</span><span class="n">Polygon</span><span class="p">)</span> <span class="c1">#create new rubberband</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span><span class="o">.</span><span class="n">setBorderColor</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span> <span class="c1">#Set birder color for new rubberband (red)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span><span class="o">.</span><span class="n">setFillColor</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span> <span class="c1">#set fill color for new rubberband (red)</span>
            <span class="c1">#self.rubberHighlight.setLineStyle(Qt.PenStyle(Qt.DotLine))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1">#Set widht of new rubberband</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span><span class="o">.</span><span class="n">setToGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selection</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span><span class="p">]</span><span class="o">.</span><span class="n">geometry</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="p">)</span> <span class="c1">#set geometry of rubberband equal to current selected object</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberHighlight</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1">#Show rubberband</span></div>

<div class="viewcode-block" id="Tilgjengelighet.infoWidget_next"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.infoWidget_next">[docs]</a>    <span class="k">def</span> <span class="nf">infoWidget_next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;shows next object in infoWidget&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span><span class="o">+=</span><span class="mi">1</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_objects</span><span class="p">:</span> <span class="c1">#when exiding objects, go back to first</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj_info</span><span class="p">()</span> <span class="c1">#Fill infowidget with new info</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">highlightSelected</span><span class="p">()</span> <span class="c1">#set new rubberband to highlight new object</span>
        <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span></div>
        

<div class="viewcode-block" id="Tilgjengelighet.infoWidget_prev"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.infoWidget_prev">[docs]</a>    <span class="k">def</span> <span class="nf">infoWidget_prev</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;shows previus object in infoWidget&quot;&quot;&quot;</span>
    
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span><span class="o">-=</span><span class="mi">1</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="c1">#when exiding objects, go to last</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_objects</span><span class="o">-</span><span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj_info</span><span class="p">()</span> <span class="c1">#Fill infowidget with new info</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">highlightSelected</span><span class="p">()</span> <span class="c1">#set new rubberband to highlight new object</span>
        <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span></div>


<div class="viewcode-block" id="Tilgjengelighet.obj_info"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.obj_info">[docs]</a>    <span class="k">def</span> <span class="nf">obj_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fills infowidget with info of current object&quot;&quot;&quot;</span>
    
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">label_object_number</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">/</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_objects</span><span class="p">))</span> <span class="c1">#Show current object, and number of objects selected</span>
    
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selection</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span><span class="p">)):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selection</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_sel_obj</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">())]</span> <span class="c1">#Get attribute value of current selected objects for </span>
                    <span class="k">try</span><span class="p">:</span> <span class="c1">#insert valu to infowidget</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">long</span><span class="p">)):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="c1">#make value str</span>
                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="n">QPyNullVariant</span><span class="p">)):</span> <span class="c1">#No value</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span> <span class="c1">#No value</span>
                <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="c1">#attribute not in layer do to no value in any objects</span>
                    <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1">#No objects chocen, set value to &quot;-&quot;</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_attributes</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">gridLayout</span><span class="o">.</span><span class="n">itemAtPosition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tilgjengelighet.show_message"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.show_message">[docs]</a>    <span class="k">def</span> <span class="nf">show_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_text</span><span class="p">,</span> <span class="n">msg_title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg_details</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Show the user a message</span>
<span class="sd">        :param msg_text: the tekst to show the user</span>
<span class="sd">        :type msg_text: str</span>

<span class="sd">        :param msg_title: the title of the message box</span>
<span class="sd">        :type msg_title: str</span>

<span class="sd">        :param msg_info: additional info for the user</span>
<span class="sd">        :type msg_info: str</span>

<span class="sd">        :param msg_details: details for the user</span>
<span class="sd">        :type msg_details: str</span>

<span class="sd">        :param msg_type: the type of message</span>
<span class="sd">        :type msg_type: QMessageBox.Icon</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
        
        <span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_unicode</span><span class="p">(</span><span class="n">msg_text</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">msg_title</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">msg_title</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">msg_info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span><span class="n">msg_info</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">msg_details</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">setDetailedText</span><span class="p">(</span><span class="n">msg_details</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">msg_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">msg_type</span><span class="p">)</span>

        <span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>

        <span class="n">retval</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">((</span><span class="s2">&quot;value of pressed message box button:&quot;</span><span class="p">,</span> <span class="n">retval</span><span class="p">))</span></div>


    


<div class="viewcode-block" id="Tilgjengelighet.savePath"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.savePath">[docs]</a>    <span class="k">def</span> <span class="nf">savePath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">saveType</span><span class="p">,</span> <span class="n">saveExtension</span><span class="p">):</span> <span class="c1">#find savepath</span>
        <span class="sd">&quot;&quot;&quot;Find the save path</span>

<span class="sd">        :param saveType: The type of file to be saved</span>
<span class="sd">        :type saveType: str</span>
<span class="sd">        :param saveExtension: File extention (e.g .xls .png)</span>
<span class="sd">        :type saveExtension: str</span>
<span class="sd">        :returns: direktory path and file namle</span>
<span class="sd">        :rtype: (str,str)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">dirPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;/Tilgjengelighet/savePath&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="c1">#Open file expoorer and save file</span>
        <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">filter</span><span class="p">)</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileNameAndFilter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span>
                    <span class="s2">&quot;Please save </span><span class="si">{0}</span><span class="s2"> file as...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">saveType</span><span class="p">),</span>
                    <span class="n">dirPath</span><span class="p">,</span>
                    <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> files (*</span><span class="si">{1}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">saveType</span><span class="p">,</span> <span class="n">saveExtension</span><span class="p">),</span>
                    <span class="s2">&quot;Filter list for selecting files from a dialog box&quot;</span><span class="p">)</span>
        <span class="n">fn</span><span class="p">,</span> <span class="n">fileExtension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">unicode</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># user choose cancel</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s2">&quot;/Tilgjengelighet/savePath&quot;</span><span class="p">,</span> <span class="n">QFileInfo</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">absolutePath</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">fileExtension</span> <span class="o">!=</span> <span class="n">saveExtension</span><span class="p">:</span> <span class="c1">#set file extention to filename</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span> <span class="o">+</span> <span class="n">saveExtension</span>

        <span class="k">return</span> <span class="n">dirPath</span><span class="p">,</span> <span class="n">filename</span> <span class="c1">#return path to save folder and filname</span></div>


<div class="viewcode-block" id="Tilgjengelighet.imageSave"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.imageSave">[docs]</a>    <span class="k">def</span> <span class="nf">imageSave</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;saves a screenshot of canvas&quot;&quot;&quot;</span>

        <span class="n">dirPath</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">savePath</span><span class="p">(</span><span class="s2">&quot;Image&quot;</span><span class="p">,</span> <span class="s2">&quot;.png&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dirPath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="c1">#user chose cansel</span>
            <span class="k">return</span>

        <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">QImage</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">QImage</span><span class="o">.</span><span class="n">Format_RGB32</span><span class="p">)</span>

        <span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mapSettings</span><span class="p">()</span>

        <span class="n">job</span> <span class="o">=</span> <span class="n">QgsMapRendererCustomPainterJob</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">painter</span><span class="p">)</span>
        <span class="n">job</span><span class="o">.</span><span class="n">renderSynchronously</span><span class="p">()</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
        <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="c1">#filename1 + &quot;.png&quot;)#&#39;C:\\Users\\kaspa_000\\OneDrive\\Documents\\Skole-KaspArno\\Master\\tests\\newimageTest3.png&#39;)</span></div>


<div class="viewcode-block" id="Tilgjengelighet.open_export_layer_dialog"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.open_export_layer_dialog">[docs]</a>    <span class="k">def</span> <span class="nf">open_export_layer_dialog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1">#Not currently in use</span>
        <span class="sd">&quot;&quot;&quot;opens the excport gui&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

<div class="viewcode-block" id="Tilgjengelighet.OpenBrowser"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.OpenBrowser">[docs]</a>    <span class="k">def</span> <span class="nf">OpenBrowser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1">#Not currently in use</span>
        <span class="sd">&quot;&quot;&quot;Opens broeser to save file&quot;&quot;&quot;</span>
        <span class="n">filename1</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">filename1</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tilgjengelighet.lagre_lag"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.lagre_lag">[docs]</a>    <span class="k">def</span> <span class="nf">lagre_lag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1">#Not currently in use</span>
        <span class="sd">&quot;&quot;&quot;Saves layer as exported&quot;&quot;&quot;</span>
        <span class="n">QgsVectorFileWriter</span><span class="o">.</span><span class="n">writeAsVectorFormat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">activeLayer</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_layer</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span></div>


<div class="viewcode-block" id="Tilgjengelighet.reset"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="sd">&quot;&quot;&quot;Resets the gui back to default&quot;&quot;&quot;</span>
        <span class="n">all_attributes</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1">#add all attributes to lost</span>
        <span class="k">for</span> <span class="n">attributeList</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_tettsted</span><span class="p">:</span>
            <span class="n">all_attributes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attributes_tettsted</span><span class="p">[</span><span class="n">attributeList</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">attributeList</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes_friluft</span><span class="p">:</span>
            <span class="n">all_attributes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attributes_friluft</span><span class="p">[</span><span class="n">attributeList</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">all_attributes</span><span class="p">:</span>
            <span class="n">attribute</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span> <span class="c1">#resets attribute value</span></div>



    <span class="c1">###############################################Xy-tools#####################################################</span>
<div class="viewcode-block" id="Tilgjengelighet.excelSave"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.excelSave">[docs]</a>    <span class="k">def</span> <span class="nf">excelSave</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;obtaind from xytools, Saves features to excel format</span>
<span class="sd">        @author: Richard Duivenvoorde</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> 
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span> <span class="s2">&quot;Finner ingen lag å eksportere&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">activeLayer</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">currentLayerChanged</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">activeLayer</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>   
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span> <span class="s2">&quot;No active layer&quot;</span><span class="p">,</span> <span class="s2">&quot;Please make an vector layer active before saving it to excel file.&quot;</span><span class="p">)</span>
                <span class="k">return</span>

        <span class="n">fieldNames</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">fieldNames</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="p">)</span>
        <span class="n">dlg</span> <span class="o">=</span> <span class="n">FieldChooserDialog</span><span class="p">(</span><span class="n">fieldNames</span><span class="p">)</span>

        <span class="n">names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">dlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">names</span> <span class="o">=</span> <span class="n">dlg</span><span class="o">.</span><span class="n">getSelectedFields</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span> <span class="s2">&quot;No fields selected&quot;</span><span class="p">,</span> <span class="s2">&quot;Please select at least one field.&quot;</span><span class="p">)</span>

        <span class="n">dirPath</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">savePath</span><span class="p">(</span><span class="s2">&quot;Excel&quot;</span><span class="p">,</span> <span class="s2">&quot;.xls&quot;</span><span class="p">)</span>
       
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">xytools.providers</span> <span class="k">import</span> <span class="n">excel</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span> <span class="s2">&quot;Unable to load Python module&quot;</span><span class="p">,</span> <span class="s2">&quot;There is a problem with loading a python module which is needed to read/write Excel files. Please see documentation/help how to install python xlw and xlrd libraries.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">xlw</span> <span class="o">=</span> <span class="n">excel</span><span class="o">.</span><span class="n">Writer</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="c1">#self.layer = self.iface.activeLayer()</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">selectedFeatureCount</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span> 
                <span class="s2">&quot;Eksporter Til Excel&quot;</span><span class="p">,</span> 
                <span class="p">(</span><span class="s2">&quot;You have a selection in this layer. Only export this selection?</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="s2">&quot;Click Yes to export selection only, click No to export all rows.&quot;</span><span class="p">),</span> 
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">,</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">)</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
                    <span class="n">selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">selectedFeaturesIds</span><span class="p">()</span>
        <span class="n">feature</span> <span class="o">=</span> <span class="n">QgsFeature</span><span class="p">();</span>

        <span class="n">xlw</span><span class="o">.</span><span class="n">writeAttributeRow</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>

        <span class="n">rowNr</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">QGis</span><span class="o">.</span><span class="n">QGIS_VERSION_INT</span> <span class="o">&lt;</span> <span class="mi">10900</span><span class="p">:</span>
            <span class="n">prov</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">dataProvider</span><span class="p">()</span>
            <span class="n">prov</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">prov</span><span class="o">.</span><span class="n">attributeIndexes</span><span class="p">())</span>
            <span class="k">while</span> <span class="n">prov</span><span class="o">.</span><span class="n">nextFeature</span><span class="p">(</span><span class="n">feature</span><span class="p">):</span>
                <span class="c1"># attribute values, either for all or only for selection</span>
                <span class="k">if</span> <span class="n">selection</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">feature</span><span class="o">.</span><span class="n">id</span><span class="p">()</span> <span class="ow">in</span> <span class="n">selection</span><span class="p">:</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">attributeMap</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                    <span class="n">rowValues</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
                        <span class="n">rowValues</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">field</span><span class="p">])</span>
                    <span class="n">xlw</span><span class="o">.</span><span class="n">writeAttributeRow</span><span class="p">(</span><span class="n">rowNr</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
                    <span class="n">rowNr</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prov</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_search_layer</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">()</span>
            <span class="k">while</span> <span class="n">prov</span><span class="o">.</span><span class="n">nextFeature</span><span class="p">(</span><span class="n">feature</span><span class="p">):</span>
                <span class="c1"># attribute values, either for all or only for selection</span>
                <span class="k">if</span> <span class="n">selection</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">feature</span><span class="o">.</span><span class="n">id</span><span class="p">()</span> <span class="ow">in</span> <span class="n">selection</span><span class="p">:</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
                        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="o">.</span><span class="n">attribute</span><span class="p">(</span><span class="n">field</span><span class="p">))</span>
                    <span class="n">xlw</span><span class="o">.</span><span class="n">writeAttributeRow</span><span class="p">(</span><span class="n">rowNr</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
                    <span class="n">rowNr</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">xlw</span><span class="o">.</span><span class="n">saveFile</span><span class="p">()</span>
        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">(),</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Successfully saved as xls file&quot;</span><span class="p">)</span></div>

  <span class="c1">########################### Open Lyaers Plugin ##########################################</span>
<div class="viewcode-block" id="Tilgjengelighet.openLayer_background_init"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.openLayer_background_init">[docs]</a>    <span class="k">def</span> <span class="nf">openLayer_background_init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The folowing code has been taken out from OpenLayers Plugin writen by Sourcepole&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olMenu</span> <span class="o">=</span> <span class="n">QMenu</span><span class="p">(</span><span class="s2">&quot;OpenLayers plugin&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOpenStreetMapLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOpenCycleMapLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOCMLandscapeLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOCMPublicTransportLayer</span><span class="p">())</span>

        <span class="c1"># ID 8-10 was Yahoo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOSMHumanitarianDataModelLayer</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlBingRoadLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlBingAerialLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlBingAerialLabelledLayer</span><span class="p">())</span>

        <span class="c1"># Order from here on is free. Layers 0-14 should keep order for</span>
        <span class="c1"># compatibility with OL Plugin &lt; 2.3</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOSMStamenTonerLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOSMStamenTonerLiteLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOSMStamenWatercolorLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlOSMStamenTerrainLayer</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">OlAppleiPhotoMapLayer</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">WikimediaLabelledLayer</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">WikimediaUnLabelledLayer</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">groups</span><span class="p">():</span>
            <span class="c1">#print(&quot;group: &quot;, group)</span>
            <span class="n">groupMenu</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">menu</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="o">.</span><span class="n">groupLayerTypes</span><span class="p">(</span><span class="n">group</span><span class="p">):</span>
                <span class="c1">#print(&quot;layer: &quot;, layer)</span>
                <span class="n">layer</span><span class="o">.</span><span class="n">addMenuEntry</span><span class="p">(</span><span class="n">groupMenu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_olMenu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="n">groupMenu</span><span class="p">)</span>

        <span class="c1">#self.addOLmenu()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoWidget</span><span class="o">.</span><span class="n">toolButton_map</span><span class="o">.</span><span class="n">setMenu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_olMenu</span><span class="p">)</span></div>


    
<div class="viewcode-block" id="Tilgjengelighet.addLayer"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.addLayer">[docs]</a>    <span class="k">def</span> <span class="nf">addLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layerType</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The folowing code has been taken out from OpenLayers Plugin writen by Sourcepole&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">layerType</span><span class="o">.</span><span class="n">hasGdalTMS</span><span class="p">():</span>
            <span class="c1"># create GDAL TMS layer</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createGdalTmsLayer</span><span class="p">(</span><span class="n">layerType</span><span class="p">,</span> <span class="n">layerType</span><span class="o">.</span><span class="n">displayName</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># create OpenlayersLayer</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">OpenlayersLayer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_olLayerTypeRegistry</span><span class="p">)</span>
            <span class="n">layer</span><span class="o">.</span><span class="n">setLayerName</span><span class="p">(</span><span class="n">layerType</span><span class="o">.</span><span class="n">displayName</span><span class="p">)</span>
            <span class="n">layer</span><span class="o">.</span><span class="n">setLayerType</span><span class="p">(</span><span class="n">layerType</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">isValid</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ol_layers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">removeMapLayers</span><span class="p">(</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ol_layers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">()]</span> <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_ol_layers</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ol_layers</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">coordRefSys</span> <span class="o">=</span> <span class="n">layerType</span><span class="o">.</span><span class="n">coordRefSys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvasCrs</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setMapCrs</span><span class="p">(</span><span class="n">coordRefSys</span><span class="p">)</span>
            <span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ol_layers</span> <span class="o">+=</span> <span class="p">[</span><span class="n">layer</span><span class="p">]</span>

            <span class="c1"># last added layer is new reference</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setReferenceLayer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">layerType</span><span class="o">.</span><span class="n">hasGdalTMS</span><span class="p">():</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Printing and rotating of Javascript API &quot;</span> \
                      <span class="s2">&quot;based layers is currently not supported!&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">messageBar</span><span class="p">()</span><span class="o">.</span><span class="n">pushMessage</span><span class="p">(</span>
                    <span class="s2">&quot;OpenLayers Plugin&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">QgsMessageBar</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
                    <span class="n">duration</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

            <span class="c1">#Set background mat at bacground</span>
            <span class="n">root</span> <span class="o">=</span> <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">layerTreeRoot</span><span class="p">()</span>
            <span class="n">root</span><span class="o">.</span><span class="n">insertLayer</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">layer</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tilgjengelighet.setReferenceLayer"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.setReferenceLayer">[docs]</a>    <span class="k">def</span> <span class="nf">setReferenceLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The folowing code has been taken out from OpenLayers Plugin writen by Sourcepole&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer</span> <span class="o">=</span> <span class="n">layer</span></div>

<div class="viewcode-block" id="Tilgjengelighet.createGdalTmsLayer"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.createGdalTmsLayer">[docs]</a>    <span class="k">def</span> <span class="nf">createGdalTmsLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layerType</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The folowing code has been taken out from OpenLayers Plugin writen by Sourcepole&quot;&quot;&quot;</span>

        <span class="c1"># create GDAL TMS layer with XML string as datasource</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">QgsRasterLayer</span><span class="p">(</span><span class="n">layerType</span><span class="o">.</span><span class="n">gdalTMSConfig</span><span class="p">(),</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">layer</span><span class="o">.</span><span class="n">setCustomProperty</span><span class="p">(</span><span class="s1">&#39;ol_layer_type&#39;</span><span class="p">,</span> <span class="n">layerType</span><span class="o">.</span><span class="n">layerTypeName</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">layer</span></div>

<div class="viewcode-block" id="Tilgjengelighet.canvasCrs"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.canvasCrs">[docs]</a>    <span class="k">def</span> <span class="nf">canvasCrs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The folowing code has been taken out from OpenLayers Plugin writen by Sourcepole&quot;&quot;&quot;</span>
        <span class="n">mapCanvas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mapCanvas</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">QGis</span><span class="o">.</span><span class="n">QGIS_VERSION_INT</span> <span class="o">&gt;=</span> <span class="mi">20300</span><span class="p">:</span>
            <span class="c1">#crs = mapCanvas.mapRenderer().destinationCrs()</span>
            <span class="n">crs</span> <span class="o">=</span> <span class="n">mapCanvas</span><span class="o">.</span><span class="n">mapSettings</span><span class="p">()</span><span class="o">.</span><span class="n">destinationCrs</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">QGis</span><span class="o">.</span><span class="n">QGIS_VERSION_INT</span> <span class="o">&gt;=</span> <span class="mi">10900</span><span class="p">:</span>
            <span class="n">crs</span> <span class="o">=</span> <span class="n">mapCanvas</span><span class="o">.</span><span class="n">mapRenderer</span><span class="p">()</span><span class="o">.</span><span class="n">destinationCrs</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">crs</span> <span class="o">=</span> <span class="n">mapCanvas</span><span class="o">.</span><span class="n">mapRenderer</span><span class="p">()</span><span class="o">.</span><span class="n">destinationSrs</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">crs</span></div>

<div class="viewcode-block" id="Tilgjengelighet.setMapCrs"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.setMapCrs">[docs]</a>    <span class="k">def</span> <span class="nf">setMapCrs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordRefSys</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The folowing code has been taken out from OpenLayers Plugin writen by Sourcepole&quot;&quot;&quot;</span>
        <span class="n">mapCanvas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="c1"># self.iface.mapCanvas()</span>
        <span class="c1"># On the fly</span>
        <span class="k">if</span> <span class="n">QGis</span><span class="o">.</span><span class="n">QGIS_VERSION_INT</span> <span class="o">&gt;=</span> <span class="mi">20300</span><span class="p">:</span>
            <span class="c1">#mapCanvas.setCrsTransformEnabled(True)</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#mapCanvas.mapRenderer().setProjectionsEnabled(True)</span>
            <span class="k">pass</span>
        <span class="n">canvasCrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvasCrs</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">canvasCrs</span> <span class="o">!=</span> <span class="n">coordRefSys</span><span class="p">:</span>
            <span class="n">coordTrans</span> <span class="o">=</span> <span class="n">QgsCoordinateTransform</span><span class="p">(</span><span class="n">canvasCrs</span><span class="p">,</span> <span class="n">coordRefSys</span><span class="p">)</span>
            <span class="n">extMap</span> <span class="o">=</span> <span class="n">mapCanvas</span><span class="o">.</span><span class="n">extent</span><span class="p">()</span>
            <span class="n">extMap</span> <span class="o">=</span> <span class="n">coordTrans</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">extMap</span><span class="p">,</span> <span class="n">QgsCoordinateTransform</span><span class="o">.</span><span class="n">ForwardTransform</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">QGis</span><span class="o">.</span><span class="n">QGIS_VERSION_INT</span> <span class="o">&gt;=</span> <span class="mi">20300</span><span class="p">:</span>
                <span class="n">mapCanvas</span><span class="o">.</span><span class="n">setDestinationCrs</span><span class="p">(</span><span class="n">coordRefSys</span><span class="p">)</span>
                <span class="c1">#pass</span>
            <span class="k">elif</span> <span class="n">QGis</span><span class="o">.</span><span class="n">QGIS_VERSION_INT</span> <span class="o">&gt;=</span> <span class="mi">10900</span><span class="p">:</span>
                <span class="n">mapCanvas</span><span class="o">.</span><span class="n">mapRenderer</span><span class="p">()</span><span class="o">.</span><span class="n">setDestinationCrs</span><span class="p">(</span><span class="n">coordRefSys</span><span class="p">)</span>
                <span class="c1">#pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mapCanvas</span><span class="o">.</span><span class="n">mapRenderer</span><span class="p">()</span><span class="o">.</span><span class="n">setDestinationSrs</span><span class="p">(</span><span class="n">coordRefSys</span><span class="p">)</span>
                <span class="c1">#pass</span>
            <span class="n">mapCanvas</span><span class="o">.</span><span class="n">freeze</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">mapCanvas</span><span class="o">.</span><span class="n">setMapUnits</span><span class="p">(</span><span class="n">coordRefSys</span><span class="o">.</span><span class="n">mapUnits</span><span class="p">())</span>
            <span class="n">mapCanvas</span><span class="o">.</span><span class="n">setExtent</span><span class="p">(</span><span class="n">extMap</span><span class="p">)</span></div>

            




    <span class="c1">###########################################################################</span>


<div class="viewcode-block" id="Tilgjengelighet.run"><a class="viewcode-back" href="../code.html#Tilgjengelighet.Tilgjengelighet.run">[docs]</a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#reloadPlugin(&#39;Tilgjengelighet&#39;)</span>
        <span class="sd">&quot;&quot;&quot;Run method that performs all the real work&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="c1"># See if OK was pressed</span>
        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
            <span class="c1"># Do something useful here - delete the line containing pass and</span>
            <span class="c1"># substitute with your code.</span>
            <span class="k">pass</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Kasper Skjeggestad.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>